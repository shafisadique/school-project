<div class="container-fluid py-6 bg-gray-50 min-h-screen">
  <div class="row justify-content-center">
    <div class="col-12 col-lg-12">
      <!-- Loading Overlay -->
      <div *ngIf="loading" class="loading-overlay">
        <div class="spinner"></div>
      </div>

      <div class="row g-4">
        <!-- Class Management -->
        <div class="col-md-6">
          <div class="card bg-white shadow-xl rounded-xl overflow-hidden">
            <div class="card-header bg-gradient-to-r from-blue-700 to-blue-900 text-white p-2">
              <h5 class="card-title text-xl font-semibold" style="color: whitesmoke;">Add Class</h5>
            </div>
            <div class="card-body p-6">
              <form [formGroup]="classForm" (ngSubmit)="addClass()">
                <div class="mb-4">
                  <label for="className" class="block text-sm font-medium text-gray-700 mb-1">Select Class</label>
                  <div class="custom-select-wrapper">
                    <select id="className" class="custom-select" formControlName="name">
                      <option value="" disabled selected>Select Class</option>
                      <option *ngFor="let cls of classList" [value]="cls">{{ cls }}</option>
                    </select>
                  </div>
                  <div *ngIf="classForm.get('name')?.invalid && classForm.get('name')?.touched" class="text-danger text-sm mt-1">
                    Class name is required.
                  </div>
                </div>
                <div class="mb-4">
                  <label for="sections" class="block text-sm font-medium text-gray-700 mb-1">Sections (comma-separated)</label>
                  <div class="custom-input-wrapper">
                    <input id="sections" type="text" class="custom-input" formControlName="sections" placeholder="e.g., A, B, C">
                  </div>
                  <div *ngIf="classForm.get('sections')?.invalid && classForm.get('sections')?.touched" class="text-danger text-sm mt-1">
                    Sections are required.
                  </div>
                </div>
                <button type="submit" class="btn-primary w-100" [disabled]="classForm.invalid || loading">
                  {{ loading ? 'Adding...' : 'Add Class' }}
                </button>
              </form>
            </div>
          </div>

          <div class="mt-6">
            <h4 class="text-lg font-medium text-gray-700 mb-4">Existing Classes</h4>
            <div class="space-y-2">
              <div *ngFor="let cls of classes" class="card bg-white shadow-md rounded-lg p-4 hover:bg-gray-50 transition-colors">
                <strong class="text-gray-900">{{ cls.name }}</strong> - Sections: {{ cls.sections.join(', ') }}<br>
                Attendance Teacher: {{ getAttendanceTeacher(cls.attendanceTeacher) }}<br>
                Substitute Teachers: {{ getSubstituteTeachers(cls.substituteAttendanceTeachers) }}
              </div>
              <div *ngIf="classes.length === 0 && !loading" class="text-center text-gray-500 p-4">
                No classes available.
              </div>
            </div>
          </div>
        </div>

        <!-- Subject Management -->
        <div class="col-md-6">
          <div class="card bg-white shadow-xl rounded-xl overflow-hidden">
            <div class="card-header bg-gradient-to-r from-green-700 to-green-900 text-white p-2">
              <h5 class="card-title text-xl font-semibold" style="color: whitesmoke;">Add Subject</h5>
            </div>
            <div class="card-body p-6">
              <form [formGroup]="subjectForm" (ngSubmit)="addSubject()">
                <div class="mb-4">
                  <label for="subjectName" class="block text-sm font-medium text-gray-700 mb-1">Subject Name</label>
                  <div class="custom-select-wrapper">
                    <select id="subjectName" class="custom-select" formControlName="name">
                      <option value="" disabled selected>Select Subject</option>
                      <option *ngFor="let sub of classSubjects" [value]="sub">{{ sub }}</option>
                    </select>
                  </div>
                  <div *ngIf="subjectForm.get('name')?.invalid && subjectForm.get('name')?.touched" class="text-danger text-sm mt-1">
                    Subject name is required.
                  </div>
                </div>
                <button type="submit" class="btn-success w-100" [disabled]="subjectForm.invalid || loading">
                  {{ loading ? 'Adding...' : 'Add Subject' }}
                </button>
              </form>
            </div>
          </div>

          <div class="mt-6">
            <h4 class="text-lg font-medium text-gray-700 mb-4">Existing Subjects</h4>
            <div class="space-y-2">
              <div *ngFor="let subject of subjects" class="card bg-white shadow-md rounded-lg p-4 hover:bg-gray-50 transition-colors">
                {{ subject.name }}
              </div>
              <div *ngIf="subjects.length === 0 && !loading" class="text-center text-gray-500 p-4">
                No subjects available.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>