<div class="container">
  <!-- Filters and Search -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <!-- Left Side: Filters and Search Button -->
    <div class="filters d-flex align-items-center">
      <select 
        class="form-control form-control-sm me-2" 
        [(ngModel)]="selectedClass" 
        (change)="onFilterChange()"
        style="width: 150px;">
        <option value="">All Classes</option>
        <option *ngFor="let classItem of classes" [value]="classItem._id">{{ classItem.name }}</option>
      </select>

      <select 
        class="form-control form-control-sm me-2" 
        [(ngModel)]="selectedSession" 
        (change)="onFilterChange()"
        style="width: 150px;">
        <option value="">All Sessions</option>
        <option *ngFor="let year of academicYears" [value]="year._id">{{ year.name }}</option>
      </select>

      <button class="btn btn-primary btn-sm" (click)="onSearch()">Search</button>
    </div>

    <!-- Right Side: Search Field -->
    <div class="search-field">
      <input 
        type="text" 
        class="form-control form-control-sm" 
        placeholder="Search by name or admission no" 
        [(ngModel)]="searchQuery" 
        (keyup.enter)="onSearch()"
        style="width: 250px;">
    </div>
  </div>

  <!-- Student Table -->
  <div class="table-container">
    <table class="professional-table table-striped table-sm">
      <thead>
        <tr>
          <th>#</th>
          <th>Name</th>
          <th>Admission No</th>
          <th>Class</th>
          <th>Contact</th>
          <th>Gender</th>
          <th>Status</th>

        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let student of students; let i = index">
           <td>
            <div ngbDropdown>
              <button class="btn btn-link btn-sm" id="dropdownButton{{i}}" ngbDropdownToggle>
                {{ (currentPage - 1) * pageSize + i + 1 }}
              </button>
              <div ngbDropdownMenu >
                <button ngbDropdownItem (click)="onUpdateStudent(student._id)">Update</button>
               
              </div>
            </div>
          </td>
          <td class="profile-cell">
            <div class="profile-wrapper">
              <img *ngIf="student.profileImage" crossorigin="anonymous"
                [src]="getImageUrl(student.profileImage)"
                alt="{{ student.name }} profile"
                class="profile-avatar">
              <div *ngIf="!student.profileImage" class="avatar-placeholder">
                {{ getInitials(student.name) }}
              </div>
              <span class="student-name">{{ student.name }}</span>
            </div>
          </td>
          <td>{{ student.admissionNo }}</td>
          <td>{{ student.classId?.name || 'N/A' }}</td>
          <td>
            <div>{{ student.phone }}</div>
          </td>
          <td>{{ student.gender }}</td>
          <td>{{ student.status }}</td>

        </tr>
        <tr *ngIf="students.length === 0">
          <td colspan="6" style="text-align: center; font-family: 'Poppins', sans-serif; font-weight: 600;">
            No Students Available
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <!-- Pagination Component -->
<app-pagination
  [currentPage]="currentPage"
  [pageSize]="pageSize"
  [totalItems]="totalItems"
  [pageSizeOptions]="pageSizeOptions"
  (pageChange)="onPageChange($event)">
</app-pagination>
  
</div>