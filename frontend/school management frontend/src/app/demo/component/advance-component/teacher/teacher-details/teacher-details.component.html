  <div class="teacher-container">
    <!-- Header Section - Gradient Card with Title -->
    <div class="header-section">
      <div class="header-card">
        <h1 class="title">Teacher Management Dashboard</h1>
        <p class="subtitle">Manage teacher records, profiles, and assignments efficiently.</p>
      </div>
    </div>

    <!-- Controls Section - Card with Flex/Grid Layout -->
    <div class="controls-section">
      <div class="controls-card">
        <!-- Left: Action Buttons (icons + labels, pill-shaped) -->
        <div class="buttons-group">
          <button 
            class="btn-material btn-primary" 
            (click)="createTeacher()"
            aria-label="Create new teacher">
            <i class="fas fa-plus"></i> Create
          </button>
          <button 
            class="btn-material btn-secondary" 
            [disabled]="selectedTeachers.length !== 1"
            (click)="onUpdateTeacher()"
            aria-label="Update selected teacher">
            <i class="fas fa-pencil-alt"></i> Update
          </button>
          <button 
            class="btn-material btn-danger" 
            [disabled]="selectedTeachers.length === 0"
            (click)="onDeleteTeacher()"
            aria-label="Delete selected teachers">
            <i class="fas fa-trash"></i> Delete
          </button>
          <button 
            class="btn-material btn-success" 
            (click)="downloadExcel()"
            aria-label="Download teachers as Excel">
            <i class="fas fa-download"></i> Export
          </button>
        </div>

        <!-- Middle: Search with Icon -->
        <!-- <div class="search-group">
          <div class="search-container">
            <i class="fas fa-search search-icon"></i>
            <input 
              type="text" 
              class="form-control" 
              placeholder="Search by name, username, or phone..." 
              [(ngModel)]="searchQuery" 
              (input)="onSearchInputChange($event)"
              (keyup.enter)="onSearch()"
              role="search"
              [attr.aria-label]="'Search teachers'">
          </div>
        </div> -->
        
        <!-- Right: Filters (dropdowns + button) - Minimal for production -->
        <div class="filters-group">
          <!-- <div class="filter-item">
            <select 
              class="form-select" 
              [(ngModel)]="selectedStatus" 
              (change)="onFilterChange()"
              [attr.aria-label]="'Filter by status'">
              <option value="">All Status</option>
              <option value="true">Active</option>
              <option value="false">Inactive</option>
            </select>
            <i class="fas fa-toggle-on filter-icon"></i>
          </div> -->
          
          <!-- <button 
            class="btn-material btn-primary" 
            (click)="onSearch()"
            [attr.aria-label]="'Apply filters'">
            <i class="fas fa-filter"></i> Filter
          </button> -->
        </div>
      </div>
    </div>

    <!-- Table Section - Enhanced Professional Table -->
    <div class="table-section">
      <div class="table-card">
        <div class="table-responsive">
          <table class="table table-striped table-hover table-sm professional-table" role="table" aria-label="Teachers Table">
            <thead class="table-dark">
              <tr>
                <th scope="col" class="checkbox-col">
                  <input 
                    type="checkbox" 
                    [checked]="isAllSelected()" 
                    [indeterminate]="areSomeSelected()"
                    (change)="toggleAllSelection($event)"
                    [attr.aria-label]="'Select all teachers'">
                </th>
                <th scope="col" class="index-col">#</th>
                <th scope="col" class="name-col" (click)="onSort('name')" role="button" tabindex="0" [attr.aria-sort]="sortColumn === 'name' ? (sortDirection === 'asc' ? 'ascending' : 'descending') : 'none'">
                  Teacher Name
                  <i class="fas fa-sort ms-1" [ngClass]="{'fa-sort-up': sortColumn === 'name' && sortDirection === 'asc', 'fa-sort-down': sortColumn === 'name' && sortDirection === 'desc'}"></i>
                </th>
                <th scope="col" class="username-col">Username</th>
                <th scope="col" class="subjects-col">Subjects</th>
                <th scope="col" class="phone-col">Phone</th>
                <!-- <th scope="col" class="leave-col">Leave Balance</th> -->
                <th scope="col" class="email-col">Email</th>
                <th scope="col" class="gender-col">Gender</th>
                <th scope="col" class="status-col">Status</th>
                <!-- <th scope="col" class="actions-col text-center">Actions</th> -->
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let teacher of teachers; let i = index" [attr.data-teacher-id]="teacher._id" class="align-middle">
                <td class="checkbox-cell align-middle">
                  <input 
                    type="checkbox"
                    [checked]="isTeacherSelected(teacher)"
                    (change)="toggleTeacherSelection(teacher, $event)"
                    [attr.aria-label]="'Select ' + teacher.name">
                </td>
                <td class="index-cell text-center">{{ (currentPage - 1) * pageSize + i + 1 }}</td>
                <td class="profile-cell align-middle" data-label="Teacher Name">
                  <div class="profile-wrapper d-flex align-items-center">
                    <div class="avatar-placeholder me-2" [attr.aria-label]="'Avatar for ' + teacher.name">
                      <img
                        *ngIf="teacher.profileImageUrl"
                        [src]="teacher.profileImageUrl"
                        alt="{{ teacher.name }} profile"
                        class="profile-avatar"
                        crossorigin="anonymous"
                        (error)="onImageError($event, teacher)">
                      <span *ngIf="!teacher.profileImageUrl" class="initials-placeholder">{{ getInitials(teacher.name) }}</span>
                    </div>
                    <div class="teacher-info flex-grow-1">
                      <div class="teacher-name fw-medium" [attr.title]="teacher.name">{{ teacher.name }}</div>
                    </div>
                  </div>
                </td>
                <td class="username-cell text-nowrap fw-semibold" data-label="Username" [attr.title]="teacher.userId?.username || 'N/A'">{{ teacher.userId?.username || 'N/A' }}</td>
                <td class="subjects-cell" data-label="Subjects" [attr.title]="teacher.subjects?.join(', ') || 'N/A'">
                  <span *ngFor="let sub of teacher.subjects; let last = last" class="badge badge-sm badge-secondary me-1">{{ sub }}{{last ? '' : ','}}</span>
                  <span *ngIf="!teacher.subjects || teacher.subjects.length === 0">N/A</span>
                </td>
                <td class="phone-cell text-nowrap" data-label="Phone" [attr.title]="teacher.phone">{{ teacher.phone || 'N/A' }}</td>
                <!-- <td class="leave-cell text-center" data-label="Leave Balance">
                  <span class="badge badge-sm" [ngClass]="{'badge-warning': (teacher.leaveBalance | number) < 5, 'badge-success': (teacher.leaveBalance | number) >= 5}">
                    {{ teacher.leaveBalance || 0 }}
                  </span>
                </td> -->
                <td class="email-cell" data-label="Email">
                  <a href="mailto:{{ teacher.email }}" [attr.title]="teacher.email" class="text-truncate d-block">{{ teacher.email || 'N/A' }}</a>
                </td>
                <td class="gender-cell text-center" data-label="Gender">
                  <span class="badge badge-sm" [ngClass]="{'badge-primary': teacher.gender === 'Male', 'badge-secondary': teacher.gender === 'Female'}">
                    {{ teacher.gender || 'N/A' }}
                  </span>
                </td>
                <td class="status-cell text-center" data-label="Status">
                  <span class="badge badge-sm" [ngClass]="{'badge-success': teacher.status, 'badge-warning': !teacher.status}">
                    {{ teacher.status ? 'Active' : 'Inactive' }}
                  </span>
                </td>
                <!-- <td class="action-cell text-center align-middle" data-label="Actions">
                  <div class="btn-group btn-group-sm" role="group">
                    <button 
                      class="btn btn-outline-info btn-sm" 
                      (click)="onViewDetails(teacher)"
                      [attr.aria-label]="'View details for ' + teacher.name"
                      title="View Details">
                      <i class="fas fa-eye"></i>
                    </button>
                  </div>
                </td> -->
              </tr>
              <tr *ngIf="teachers.length === 0" class="no-data-row">
                <td colspan="11" class="text-center py-4">
                  <i class="fas fa-user-tie fa-3x text-muted mb-3"></i>
                  <p class="text-muted mb-0">No teachers found matching your criteria.</p>
                  <small class="text-muted">Try adjusting search or filters.</small>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    
    <!-- Pagination - Simple for production -->
    <div class="pagination-section" *ngIf="totalItems > pageSize">
      <app-pagination 
        [currentPage]="currentPage" 
        [pageSize]="pageSize" 
        [totalItems]="totalItems" 
        [pageSizeOptions]="[10, 25, 50]"
        (pageChange)="onPageChange($event)" 
        (pageSizeChange)="onPageSizeChange($event)"
        aria-label="Teacher pagination">
      </app-pagination>
    </div>
  </div>