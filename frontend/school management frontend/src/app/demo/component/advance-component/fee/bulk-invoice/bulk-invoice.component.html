<div class="container">
    <div class="card shadow">
      <div class="card-header text-white"  style="background: linear-gradient(to right, #2E3192, #1BFFFF);">
        <h5 style="font-family: 'Poppins',sans-serif; color: white; font-size: 24px;">Bulk Invoice Generation</h5>
      </div>
      
      <div class="card-body">
        <form (ngSubmit)="generateBulkInvoices()">
            <div class="row align-items-end">
              <!-- Class Selection -->
              <div class="col-md-4">
                <label class="form-label">Select Class</label>
                <select class="form-select" [(ngModel)]="selectedClass" name="className" required>
                  <option *ngFor="let cls of classList" [value]="cls">{{ cls }}</option>
                </select>
              </div>
          
              <!-- Session Selection -->
              <div class="col-md-4">
                <label class="form-label">Select Session</label>
                <select class="form-select" [(ngModel)]="selectedSession" name="session" required>
                  <option *ngFor="let session of sessions" [value]="session">{{ session }}</option>
                </select>
              </div>
          
              <!-- Month Selection -->
              <div class="col-md-4">
                <label class="form-label">Select Month</label>
                <input type="month" class="form-control" [(ngModel)]="selectedMonth" name="month" [max]="maxMonth" required>
              </div>
            </div>
          
            <!-- Validation Message -->
            <div *ngIf="selectedSession && selectedMonth && !validateMonthInSession()" class="alert alert-danger mt-2">
              Invalid: {{ selectedMonth }} is not in {{ selectedSession }} session (Valid: April 2023 - March 2024)
            </div>
          
            <!-- Action Buttons -->
            <div class="d-flex justify-content-center mt-3">
              <button type="submit" class="btn btn-success" [disabled]="isGenerating">
                <span *ngIf="!isGenerating">Generate Invoices</span>
                <span *ngIf="isGenerating">
                  <i class="fas fa-spinner fa-spin"></i> Generating...
                </span>
              </button>
            </div>
          </form>
          
  
        <!-- Results Display -->
        <div *ngIf="result" class="mt-4 alert" [ngClass]="result.success ? 'alert-success' : 'alert-danger'">
          <h5>Generation Results:</h5>
          <p>Total Students Processed: {{ result.totalStudents }}</p>
          <p>New Invoices Created: {{ result.insertedCount }}</p>
          <p>Existing Invoices Skipped: {{ result.matchedCount }}</p>
          <p *ngIf="result.error" class="text-danger">{{ result.error }}</p>
        </div>
      </div>
    </div>
  </div>