"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[1640],{1640:(x,r,i)=>{i.r(r),i.d(r,{StudentDashboardComponent:()=>k});var s=i(177),t=i(4438),c=i(2525),l=i(1626);let g=(()=>{class e{constructor(n){this.http=n,this.apiUrl=c.c.apiUrl}getDashboardData(){return this.http.get(`${this.apiUrl}/api/student-dashboard/dashboard`)}static{this.\u0275fac=function(a){return new(a||e)(t.KVO(l.Qq))}}static{this.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function u(e,o){if(1&e&&(t.j41(0,"span",32),t.EFF(1),t.k0s()),2&e){const n=t.XpG(2);t.R7$(),t.SpI(" \u2014 ",n.getTodayHolidayName()," ")}}function m(e,o){if(1&e&&(t.j41(0,"div",33)(1,"div")(2,"strong"),t.EFF(3),t.k0s()(),t.j41(4,"div",34),t.EFF(5),t.k0s()()),2&e){const n=o.$implicit;t.R7$(3),t.JRh(n.title),t.R7$(2),t.JRh(n.date)}}function f(e,o){1&e&&(t.j41(0,"p",35),t.EFF(1," No upcoming holidays "),t.k0s())}function p(e,o){if(1&e&&(t.j41(0,"div",36)(1,"span"),t.EFF(2,"Due Amount"),t.k0s(),t.j41(3,"strong"),t.EFF(4),t.nI1(5,"number"),t.k0s()()),2&e){const n=t.XpG(2);t.R7$(4),t.SpI("\u20b9",t.i5U(5,1,n.student.totalDue,"1.0-0"),"")}}function h(e,o){1&e&&(t.j41(0,"div",37)(1,"span"),t.EFF(2,"All Paid"),t.k0s(),t.j41(3,"strong"),t.EFF(4,"\u20b90"),t.k0s()())}function v(e,o){if(1&e&&(t.j41(0,"div",41)(1,"div",42),t.EFF(2),t.k0s(),t.j41(3,"div",43),t.EFF(4),t.nI1(5,"number"),t.k0s(),t.j41(6,"div",44),t.EFF(7),t.k0s()()),2&e){const n=o.$implicit,a=t.XpG(3);t.R7$(2),t.JRh(a.formatMonth(n.month)),t.R7$(2),t.SpI("\u20b9",t.i5U(5,5,n.totalAmount,"1.0-0"),""),t.R7$(2),t.AVh("paid","Paid"===n.status),t.R7$(),t.SpI(" ",n.status," ")}}function b(e,o){if(1&e&&(t.j41(0,"div",38)(1,"h4"),t.EFF(2,"Recent Invoices"),t.k0s(),t.j41(3,"div",39),t.DNE(4,v,8,8,"div",40),t.k0s()()),2&e){const n=t.XpG(2);t.R7$(4),t.Y8G("ngForOf",n.student.feeInvoices)}}function _(e,o){1&e&&(t.j41(0,"p",35),t.EFF(1," No fee records found "),t.k0s())}function F(e,o){if(1&e&&(t.j41(0,"div",45)(1,"span",46),t.EFF(2),t.k0s(),t.j41(3,"span",47),t.EFF(4),t.k0s()()),2&e){const n=o.$implicit;t.R7$(2),t.JRh(n.subject),t.R7$(2),t.SpI("Due: ",n.dueDate,"")}}function C(e,o){1&e&&(t.j41(0,"p",35),t.EFF(1," No pending assignments "),t.k0s())}function y(e,o){if(1&e&&(t.j41(0,"div",2)(1,"div",3)(2,"div",4),t.nrm(3,"img",5),t.k0s(),t.j41(4,"div",6)(5,"h1",7),t.EFF(6),t.k0s(),t.j41(7,"div",8)(8,"span"),t.EFF(9),t.k0s(),t.EFF(10," \u2022 "),t.j41(11,"span"),t.EFF(12),t.k0s(),t.EFF(13," \u2022 "),t.j41(14,"span"),t.EFF(15),t.k0s()(),t.j41(16,"div",9)(17,"strong"),t.EFF(18),t.k0s(),t.DNE(19,u,2,1,"span",10),t.k0s()(),t.nrm(20,"div",11),t.k0s(),t.j41(21,"div",12)(22,"div",13)(23,"div",14)(24,"h3"),t.EFF(25,"School Calendar"),t.k0s()(),t.j41(26,"div",15)(27,"div",16)(28,"h4"),t.EFF(29,"Upcoming Holidays"),t.k0s(),t.j41(30,"div",17),t.DNE(31,m,6,2,"div",18)(32,f,2,0,"p",19),t.k0s()()()(),t.j41(33,"div",20)(34,"div",14)(35,"h3"),t.EFF(36,"Fee Status"),t.k0s()(),t.j41(37,"div",15)(38,"div",21)(39,"div",22)(40,"span"),t.EFF(41,"Total Fee"),t.k0s(),t.j41(42,"strong"),t.EFF(43),t.nI1(44,"number"),t.k0s()(),t.j41(45,"div",23)(46,"span"),t.EFF(47,"Paid Amount"),t.k0s(),t.j41(48,"strong"),t.EFF(49),t.nI1(50,"number"),t.k0s()(),t.DNE(51,p,6,4,"div",24)(52,h,5,0,"div",25),t.k0s(),t.DNE(53,b,5,1,"div",26)(54,_,2,0,"p",19),t.k0s()(),t.j41(55,"div",27)(56,"div",14)(57,"h3"),t.EFF(58,"Pending Assignments"),t.k0s()(),t.j41(59,"div",15)(60,"div",28),t.DNE(61,F,5,2,"div",29)(62,C,2,0,"p",19),t.k0s()()(),t.j41(63,"div",30)(64,"div",14)(65,"h3"),t.EFF(66,"Exam Results"),t.k0s()(),t.j41(67,"div",31)(68,"p"),t.EFF(69,"Results will be published soon"),t.k0s()()()()()),2&e){const n=t.XpG();t.R7$(3),t.FS9("alt",n.student.name),t.Y8G("src",n.getImageUrl(n.student.photo),t.B4B),t.R7$(3),t.JRh(n.student.name),t.R7$(3),t.SpI("Class: ",n.student.className,""),t.R7$(3),t.SpI("Roll No: ",n.student.rollNo,""),t.R7$(3),t.SpI("Section: ",null==n.student.section?null:n.student.section.join(" & "),""),t.R7$(),t.AVh("holiday","Holiday"===n.student.todayAttendance),t.R7$(2),t.SpI(" ","Holiday"===n.student.todayAttendance?"Holiday Today":"Present Today"," "),t.R7$(),t.Y8G("ngIf","Holiday"===n.student.todayAttendance),t.R7$(12),t.Y8G("ngForOf",n.student.allHolidays.slice(0,5)),t.R7$(),t.Y8G("ngIf",!(null!=n.student.allHolidays&&n.student.allHolidays.length)),t.R7$(11),t.SpI("\u20b9",t.i5U(44,20,n.student.totalFee,"1.0-0"),""),t.R7$(6),t.SpI("\u20b9",t.i5U(50,23,n.student.totalPaid,"1.0-0"),""),t.R7$(2),t.Y8G("ngIf",n.student.totalDue>0),t.R7$(),t.Y8G("ngIf",0===n.student.totalDue),t.R7$(),t.Y8G("ngIf",null==n.student.feeInvoices?null:n.student.feeInvoices.length),t.R7$(),t.Y8G("ngIf",!(null!=n.student.feeInvoices&&n.student.feeInvoices.length)),t.R7$(7),t.Y8G("ngForOf",n.student.pendingAssignments),t.R7$(),t.Y8G("ngIf",!(null!=n.student.pendingAssignments&&n.student.pendingAssignments.length))}}function O(e,o){1&e&&(t.j41(0,"div",48),t.nrm(1,"div",49),t.j41(2,"p"),t.EFF(3,"Loading your dashboard..."),t.k0s()())}let k=(()=>{class e{constructor(n){this.dashboardService=n,this.student=null,this.loading=!0,this.error=""}ngOnInit(){this.loadDashboard()}loadDashboard(){this.loading=!0,this.error="",this.dashboardService.getDashboardData().subscribe({next:n=>{console.log("Dashboard data:",n),this.student=n.data,this.loading=!1},error:n=>{this.error="Unable to load dashboard. Please try again.",this.loading=!1,console.error(n)}})}refresh(){this.loadDashboard()}formatMonth(n){return new Date(n).toLocaleString("default",{month:"long",year:"numeric"})}getTodayHolidayName(){const n=(new Date).toLocaleDateString("en-GB");return this.student?.allHolidays.find(d=>d.date.includes(n.split("/").join(" ")))?.title||"Holiday"}getImageUrl(n){return n?`/api/proxy-image/${encodeURIComponent(n)}`:"assets/avtart-new.png"}static{this.\u0275fac=function(a){return new(a||e)(t.rXU(g))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-student-dashboard"]],decls:3,vars:2,consts:[["loader",""],["class","student-dashboard",4,"ngIf","ngIfElse"],[1,"student-dashboard"],[1,"profile-card"],[1,"photo-circle"],[1,"student-avatar",3,"src","alt"],[1,"profile-info"],[1,"student-name"],[1,"student-details"],[1,"attendance-status"],["class","holiday-name",4,"ngIf"],[1,"status-indicator"],[1,"cards-grid"],[1,"card","calendar"],[1,"card-header"],[1,"card-body"],[1,"upcoming-holidays"],[1,"holiday-list"],["class","holiday-item",4,"ngFor","ngForOf"],["class","no-data",4,"ngIf"],[1,"card","fee"],[1,"fee-summary-box"],[1,"fee-row"],[1,"fee-row","paid"],["class","fee-row due",4,"ngIf"],["class","fee-row success",4,"ngIf"],["class","monthly-breakdown",4,"ngIf"],[1,"card","assignments"],[1,"assignment-list"],["class","assignment-item",4,"ngFor","ngForOf"],[1,"card","results"],[1,"card-body","placeholder"],[1,"holiday-name"],[1,"holiday-item"],[1,"date"],[1,"no-data"],[1,"fee-row","due"],[1,"fee-row","success"],[1,"monthly-breakdown"],[1,"invoice-list"],["class","invoice-item",4,"ngFor","ngForOf"],[1,"invoice-item"],[1,"month"],[1,"amount"],[1,"status-badge"],[1,"assignment-item"],[1,"subject"],[1,"due"],[1,"loading-screen"],[1,"spinner"]],template:function(a,d){if(1&a&&t.DNE(0,y,70,26,"div",1)(1,O,4,0,"ng-template",null,0,t.C5r),2&a){const P=t.sdS(2);t.Y8G("ngIf",!d.loading&&d.student)("ngIfElse",P)}},dependencies:[s.MD,s.Sq,s.bT,s.QX],styles:[".student-dashboard[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f8fafc,#f1f5f9);font-family:Segoe UI,Roboto,sans-serif;padding:1.5rem;color:#1e293b}.loading-screen[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;font-size:1.1rem;color:#64748b}.spinner[_ngcontent-%COMP%]{width:60px;height:60px;border:5px solid #e2e8f0;border-top:5px solid #4caf50;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.profile-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.5rem;padding:2rem;margin-bottom:2rem;display:flex;align-items:center;gap:2rem;box-shadow:0 10px 25px #00000014;position:relative;overflow:hidden}.photo-circle[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;overflow:hidden;border:5px solid #4caf50;flex-shrink:0}.photo[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.student-name[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin:0 0 .5rem;color:#1e293b}.student-details[_ngcontent-%COMP%]{font-size:1rem;color:#64748b;margin-bottom:1rem}.attendance-status[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#166534}.attendance-status.holiday[_ngcontent-%COMP%]{color:#dc2626}.status-indicator[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;width:16px;height:16px;background:#4caf50;border-radius:50%;box-shadow:0 0 0 4px #4caf5033}.cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem}.card[_ngcontent-%COMP%]{background:#fff;border-radius:1.2rem;overflow:hidden;box-shadow:0 8px 25px #00000012;transition:transform .2s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.card-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;background:#4caf50;color:#fff}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600}.card.fee[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:#ef4444}.card.assignments[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:#f97316}.card.results[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:#8b5cf6}.card-body[_ngcontent-%COMP%]{padding:1.5rem}.fee-summary-box[_ngcontent-%COMP%]{background:#fefce8;border:1px solid #fde68a;border-radius:1rem;padding:1rem;margin-bottom:1.5rem}.fee-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1rem;margin-bottom:.75rem}.fee-row.paid[_ngcontent-%COMP%]{color:#059669}.fee-row.due[_ngcontent-%COMP%]{color:#dc2626;font-weight:600}.fee-row.success[_ngcontent-%COMP%]{color:#059669;font-weight:600}.monthly-breakdown[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .upcoming-holidays[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.1rem;margin:0 0 1rem;color:#374151}.holiday-item[_ngcontent-%COMP%], .invoice-item[_ngcontent-%COMP%], .assignment-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.75rem 0;border-bottom:1px solid #f1f5f9;font-size:.95rem}.holiday-item[_ngcontent-%COMP%]:last-child, .invoice-item[_ngcontent-%COMP%]:last-child, .assignment-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.status-badge[_ngcontent-%COMP%]{padding:.35rem .9rem;border-radius:2rem;font-size:.8rem;font-weight:600;background:#fee2e2;color:#991b1b}.status-badge.paid[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.no-data[_ngcontent-%COMP%]{text-align:center;color:#94a3b8;font-style:italic;padding:2rem 0;font-size:.95rem}.placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#94a3b8;font-style:italic;text-align:center;margin:2rem 0}@media (max-width: 768px){.profile-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.photo-circle[_ngcontent-%COMP%]{width:100px;height:100px}.student-name[_ngcontent-%COMP%]{font-size:1.6rem}}"]})}}return e})()}}]);