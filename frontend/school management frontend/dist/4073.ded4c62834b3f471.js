"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[4073],{6454:(E,l,t)=>{t.r(l),t.d(l,{ResetPasswordComponent:()=>g});var o=t(9417),a=t(749),u=t(177),s=t(4438),f=t(6561),w=t(5794);const c=()=>["/auth/login"];function h(e,d){1&e&&(s.j41(0,"div"),s.EFF(1,"Password is required"),s.k0s())}function P(e,d){1&e&&(s.j41(0,"div"),s.EFF(1,"Minimum 6 characters required"),s.k0s())}function v(e,d){if(1&e&&(s.j41(0,"div",15),s.DNE(1,h,2,0,"div",16)(2,P,2,0,"div",16),s.k0s()),2&e){const n=s.XpG();s.R7$(),s.Y8G("ngIf",null==n.f.newPassword||null==n.f.newPassword.errors?null:n.f.newPassword.errors.required),s.R7$(),s.Y8G("ngIf",null==n.f.newPassword||null==n.f.newPassword.errors?null:n.f.newPassword.errors.minlength)}}function p(e,d){1&e&&(s.j41(0,"div",15),s.EFF(1," Confirm password is required "),s.k0s())}function _(e,d){1&e&&(s.j41(0,"div",17),s.EFF(1," Passwords do not match "),s.k0s())}let g=(()=>{class e{constructor(n,i,r,m,b){this.fb=n,this.route=i,this.router=r,this.authService=m,this.toastr=b,this.isSubmitting=!1,this.token=null,this.resetForm=this.fb.group({newPassword:["",[o.k0.required,o.k0.minLength(6)]],confirmPassword:["",o.k0.required]},{validators:this.passwordMatchValidator})}ngOnInit(){this.token=this.route.snapshot.queryParamMap.get("token"),this.token||(this.toastr.error("Invalid or missing reset token","Error"),this.router.navigate(["/auth/login"]))}passwordMatchValidator(n){const i=n.get("newPassword")?.value,r=n.get("confirmPassword")?.value;return i===r?null:{mismatch:!0}}get f(){return this.resetForm.controls}onSubmit(){this.resetForm.invalid||this.isSubmitting||!this.token||(this.isSubmitting=!0,this.authService.resetPassword({token:this.token,newPassword:this.resetForm.value.newPassword,confirmPassword:this.resetForm.value.confirmPassword}).subscribe({next:()=>{this.toastr.success("Password set successfully! Please login.","Success"),this.router.navigate(["/auth/login"]),this.isSubmitting=!1},error:n=>{this.toastr.error(n.error?.message||"Failed to set password","Error"),this.isSubmitting=!1}}))}static{this.\u0275fac=function(i){return new(i||e)(s.rXU(o.ok),s.rXU(a.nX),s.rXU(a.Ix),s.rXU(f.u),s.rXU(w.tw))}}static{this.\u0275cmp=s.VBU({type:e,selectors:[["app-reset-password"]],decls:20,vars:11,consts:[[1,"auth-main"],[1,"auth-wrapper","v3"],[1,"auth-form"],[1,"card","my-5"],[1,"card-body"],[1,"text-center","mb-4"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["type","password","formControlName","newPassword","placeholder","New Password",1,"form-control","p-2","border","rounded"],["class","invalid-feedback",4,"ngIf"],["type","password","formControlName","confirmPassword","placeholder","Confirm Password",1,"form-control","p-2","border","rounded"],["class","text-danger mb-3",4,"ngIf"],[1,"d-grid"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"link-primary","mt-3","d-block","text-center",3,"routerLink"],[1,"invalid-feedback"],[4,"ngIf"],[1,"text-danger","mb-3"]],template:function(i,r){1&i&&(s.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),s.EFF(6,"Set Your Password"),s.k0s(),s.j41(7,"form",6),s.bIt("ngSubmit",function(){return r.onSubmit()}),s.j41(8,"div",7),s.nrm(9,"input",8),s.DNE(10,v,3,2,"div",9),s.k0s(),s.j41(11,"div",7),s.nrm(12,"input",10),s.DNE(13,p,2,0,"div",9),s.k0s(),s.DNE(14,_,2,0,"div",11),s.j41(15,"div",12)(16,"button",13),s.EFF(17," Set Password "),s.k0s()()(),s.j41(18,"a",14),s.EFF(19,"Back to Login"),s.k0s()()()()()()),2&i&&(s.R7$(7),s.Y8G("formGroup",r.resetForm),s.R7$(2),s.AVh("is-invalid",(null==r.f.newPassword?null:r.f.newPassword.invalid)&&(null==r.f.newPassword?null:r.f.newPassword.touched)),s.R7$(),s.Y8G("ngIf",(null==r.f.newPassword?null:r.f.newPassword.invalid)&&(null==r.f.newPassword?null:r.f.newPassword.touched)),s.R7$(2),s.AVh("is-invalid",(null==r.f.confirmPassword?null:r.f.confirmPassword.invalid)&&(null==r.f.confirmPassword?null:r.f.confirmPassword.touched)),s.R7$(),s.Y8G("ngIf",(null==r.f.confirmPassword?null:r.f.confirmPassword.invalid)&&(null==r.f.confirmPassword?null:r.f.confirmPassword.touched)),s.R7$(),s.Y8G("ngIf",(null==r.resetForm.errors?null:r.resetForm.errors.mismatch)&&r.resetForm.touched),s.R7$(2),s.Y8G("disabled",r.resetForm.invalid||r.isSubmitting),s.R7$(2),s.Y8G("routerLink",s.lJ4(10,c)))},dependencies:[o.X1,o.qT,o.me,o.BC,o.cb,o.j4,o.JD,u.MD,u.bT,a.iI,a.Wk],styles:[".auth-main[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh}.auth-wrapper[_ngcontent-%COMP%]{width:100%;max-width:500px;padding:15px}.auth-form[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a}.card[_ngcontent-%COMP%]{border:none}.btn-primary[_ngcontent-%COMP%]{background-color:#1a73e8;border-color:#1a73e8}.link-primary[_ngcontent-%COMP%]{color:#1a73e8}"]})}}return e})()}}]);