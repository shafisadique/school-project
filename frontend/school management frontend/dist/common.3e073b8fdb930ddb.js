"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[2076],{165:(_,u,a)=>{a.d(u,{n:()=>d});var n=a(1626),p=a(2525),t=a(4438);let d=(()=>{class c{constructor(r){this.http=r,this.apiUrl=p.c.apiUrl}getHeaders(){const r=localStorage.getItem("token");return r||console.error("No token found in localStorage"),new n.Lr({Authorization:`Bearer ${r}`,"Content-Type":"application/json"})}getTimetableBySchool(r,s){return this.http.get(`${this.apiUrl}/api/timetable/school/${r}`,{headers:this.getHeaders(),params:{academicYearId:s}})}getCombinedAssignments(r,s){return this.http.get(`${this.apiUrl}/api/class-subject-management/assignments/${r}`,{headers:this.getHeaders(),params:{academicYearId:s}})}getScheduleByTeacher(r,s){return this.http.get(`${this.apiUrl}/api/class-subject-management/assignments/teacher/${r}`,{headers:this.getHeaders(),params:{academicYearId:s}})}createTimetable(r){return this.http.post(`${this.apiUrl}/api/timetable/create`,r,{headers:this.getHeaders()})}deleteTimetable(r){return this.http.delete(`${this.apiUrl}/api/timetable/${r}`,{headers:this.getHeaders()})}getAcademicYears(r){return this.http.get(`${this.apiUrl}/api/academicyear/${r}`,{headers:this.getHeaders()})}getActiveAcademicYear(r){return this.http.get(`${this.apiUrl}/api/academicyear/active/${r}`,{headers:this.getHeaders()})}getStudentTimetable(r){return this.http.get(`${this.apiUrl}/api/timetable/student`,{headers:this.getHeaders(),params:{academicYearId:r}})}static{this.\u0275fac=function(s){return new(s||c)(t.KVO(n.Qq))}}static{this.\u0275prov=t.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})()},4525:(_,u,a)=>{a.d(u,{R:()=>c});var n=a(1626),p=a(2525),t=a(4438),d=a(6561);let c=(()=>{class h{constructor(s,e){this.http=s,this.authService=e,this.baseUrl=`${p.c.apiUrl}/api/exams`}createExam(s){return this.http.post(`${this.baseUrl}/create`,s)}getExamsBySchool(s,e){let i=`${this.baseUrl}/school/${s}`;const o=e||this.authService.getActiveAcademicYearId();return o?i+=`?academicYearId=${o}`:console.warn("No active academic year ID available. Fetching all exams for school."),this.http.get(i)}getExamsByTeacher(s,e){let i=`${this.baseUrl}/teacher`;const o=(new n.Nl).set("academicYearId",e||this.authService.getActiveAcademicYearId()||"").set("classId",s||"");return this.http.get(i,{params:o})}getExamsForResultEntry(){return this.http.get(`${this.baseUrl}/teacher/exams`)}deleteExam(s){return this.http.delete(`${this.baseUrl}/${s}`)}getExamById(s){return this.http.get(`${this.baseUrl}/${s}`)}updateExam(s,e){return this.http.put(`${this.baseUrl}/${s}`,e)}static{this.\u0275fac=function(e){return new(e||h)(t.KVO(n.Qq),t.KVO(d.u))}}static{this.\u0275prov=t.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},1964:(_,u,a)=>{a.d(u,{_:()=>c});var n=a(1626),p=a(2525),t=a(4438),d=a(6561);let c=(()=>{class h{constructor(s,e){this.http=s,this.authService=e,this.baseUrl=p.c.apiUrl+"/api/holidays"}getHolidays(s,e){let i=new n.Nl;return e.startDate&&(i=i.set("startDate",e.startDate)),e.endDate&&(i=i.set("endDate",e.endDate)),this.http.get(`${this.baseUrl}/list/${s}`,{params:i})}addHoliday(s){return this.http.post(`${this.baseUrl}/add`,s)}updateHoliday(s,e){return this.http.put(`${this.baseUrl}/update/${s}`,e)}deleteHoliday(s){return this.http.delete(`${this.baseUrl}/delete/${s}`)}static{this.\u0275fac=function(e){return new(e||h)(t.KVO(n.Qq),t.KVO(d.u))}}static{this.\u0275prov=t.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},3323:(_,u,a)=>{a.d(u,{e:()=>h});var n=a(4438),p=a(177),t=a(8652),d=a(9417);function c(r,s){if(1&r){const e=n.RV6();n.j41(0,"div",1)(1,"div"),n.EFF(2),n.k0s(),n.j41(3,"div",2)(4,"ngb-pagination",3),n.mxI("pageChange",function(o){n.eBV(e);const g=n.XpG();return n.DH7(g.currentPage,o)||(g.currentPage=o),n.Njj(o)}),n.bIt("pageChange",function(o){n.eBV(e);const g=n.XpG();return n.Njj(g.onPageChange(o))}),n.k0s()()()}if(2&r){const e=n.XpG();n.R7$(2),n.E5c(" Showing ",e.getStartIndex()," to ",e.getEndIndex()," of ",e.totalItems," items "),n.R7$(2),n.Y8G("collectionSize",e.totalItems),n.R50("page",e.currentPage),n.Y8G("pageSize",e.pageSize)("maxSize",5)("rotate",!0)}}let h=(()=>{class r{constructor(){this.currentPage=1,this.pageSize=25,this.totalItems=0,this.pageSizeOptions=[10,25,50,100],this.pageChange=new n.bkB,this.pageSizeChange=new n.bkB}onPageChange(e){this.currentPage=e,this.pageChange.emit(e)}onPageSizeChange(){this.pageSizeChange.emit(this.pageSize)}getStartIndex(){return(this.currentPage-1)*this.pageSize+1}getEndIndex(){return Math.min(this.currentPage*this.pageSize,this.totalItems)}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=n.VBU({type:r,selectors:[["app-pagination"]],inputs:{currentPage:"currentPage",pageSize:"pageSize",totalItems:"totalItems",pageSizeOptions:"pageSizeOptions"},outputs:{pageChange:"pageChange",pageSizeChange:"pageSizeChange"},decls:1,vars:1,consts:[["class","pagination d-flex justify-content-between align-items-center",4,"ngIf"],[1,"pagination","d-flex","justify-content-between","align-items-center"],[1,"d-flex","align-items-center"],[1,"d-flex","justify-content-end",3,"pageChange","collectionSize","page","pageSize","maxSize","rotate"]],template:function(i,o){1&i&&n.DNE(0,c,5,8,"div",0),2&i&&n.Y8G("ngIf",o.totalItems>o.pageSize)},dependencies:[p.MD,p.bT,t.c9,t.s5,d.YN],styles:[".pagination[_ngcontent-%COMP%]{padding:10px 0;font-size:14px}.pagination[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:4px;border:1px solid #ced4da}.pagination[_ngcontent-%COMP%]   ngb-pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{border-radius:4px;margin:0 2px;color:#007bff}.pagination[_ngcontent-%COMP%]   ngb-pagination[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.pagination[_ngcontent-%COMP%]   ngb-pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff;color:#fff}.pagination[_ngcontent-%COMP%]   ngb-pagination[_ngcontent-%COMP%]   .page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#6c757d}"]})}}return r})()},4977:(_,u,a)=>{a.d(u,{L:()=>h});var n=a(8810),p=a(9437),t=a(2525),d=a(4438),c=a(1626);let h=(()=>{class r{constructor(e){this.http=e,this.apiUrl=`${t.c.apiUrl}/api/results`}createResult(e){return this.http.post(`${this.apiUrl}/create`,e).pipe((0,p.W)(this.handleError("createResult")))}getResultById(e){return this.http.get(`${this.apiUrl}/${e}`)}updatePartialResult(e,i){return this.http.put(`${this.apiUrl}/partial/${e}`,i)}getExamsByTeacher(){return this.http.get(`${t.c.apiUrl}/api/exams/teacher`).pipe((0,p.W)(this.handleError("getExamsByTeacher")))}getMyResults(){return this.http.get(`${this.apiUrl}/my-results`)}getResultsByExam(e){return this.http.get(`${this.apiUrl}/exam/${e}`).pipe((0,p.W)(this.handleError("getResultsByExam")))}getResultsByStudent(e){return this.http.get(`${this.apiUrl}/student/${e}`).pipe((0,p.W)(this.handleError("getResultsByStudent")))}getAllResultsForClass(e,i,o){let g=`${this.apiUrl}/admin/class/${e}?academicYearId=${i}`;return o&&(g+=`&examId=${o}`),this.http.get(g).pipe((0,p.W)(this.handleError("getAllResultsForClass")))}createPartialResult(e){return this.http.post(`${this.apiUrl}/partial`,e).pipe((0,p.W)(this.handleError("createPartialResult")))}getPartialResults(e,i){return this.http.get(`${this.apiUrl}/partial?studentId=${e}&examId=${i}`).pipe((0,p.W)(this.handleError("getPartialResults")))}getExamsForResultEntry(){return this.http.get(`${this.apiUrl}/result-entry`)}publishExamResults(e){return this.http.put(`${this.apiUrl}/publish-exam`,e)}publishResult(e){return this.http.put(`${this.apiUrl}/${e}/publish`,{})}publishSingleResult(e,i){return this.http.put(`${this.apiUrl}/publish-single`,{studentId:e,examId:i}).pipe((0,p.W)(this.handleError("publishSingleResult")))}handleError(e="operation"){return i=>(console.error(`${e} failed:`,i),(0,n.$)(()=>i))}static{this.\u0275fac=function(i){return new(i||r)(d.KVO(c.Qq))}}static{this.\u0275prov=d.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},4755:(_,u,a)=>{a.r(u),a.d(u,{StudentResultComponent:()=>i});var n=a(177),p=a(9417),t=a(4438),d=a(4977);function c(o,g){1&o&&(t.j41(0,"div",8)(1,"div",9)(2,"span",10),t.EFF(3,"Loading..."),t.k0s()(),t.j41(4,"p",11),t.EFF(5,"Fetching your results..."),t.k0s()())}function h(o,g){if(1&o&&(t.j41(0,"div",8),t.nrm(1,"i",12),t.j41(2,"h5",13),t.EFF(3),t.k0s(),t.j41(4,"p",14),t.EFF(5,"Please check back later."),t.k0s()()),2&o){const l=t.XpG();t.R7$(3),t.JRh(l.response.message)}}function r(o,g){if(1&o&&(t.j41(0,"tr")(1,"td",28),t.EFF(2),t.k0s(),t.j41(3,"td",29),t.EFF(4),t.k0s(),t.j41(5,"td",29),t.EFF(6),t.k0s(),t.j41(7,"td",29),t.EFF(8),t.nI1(9,"number"),t.k0s(),t.j41(10,"td",29)(11,"span",30),t.EFF(12),t.k0s()()()),2&o){const l=g.$implicit;t.R7$(2),t.JRh(l.subjectId.name),t.R7$(2),t.JRh(l.marksObtained),t.R7$(2),t.JRh(l.maxMarks),t.R7$(),t.AVh("text-success",l.passed)("text-danger",!l.passed),t.R7$(),t.SpI(" ",t.i5U(9,13,l.marksObtained/l.maxMarks*100,"1.1-1"),"% "),t.R7$(3),t.AVh("bg-success",l.passed)("bg-danger",!l.passed),t.R7$(),t.SpI(" ",l.passed?"Pass":"Fail"," ")}}function s(o,g){if(1&o&&(t.j41(0,"div",16)(1,"div",17)(2,"h5",18),t.EFF(3),t.k0s(),t.j41(4,"span",19),t.EFF(5),t.k0s()(),t.j41(6,"div",20)(7,"div",21)(8,"strong"),t.EFF(9),t.k0s(),t.j41(10,"small",22),t.EFF(11,"Total Marks"),t.k0s()(),t.j41(12,"div",21)(13,"strong"),t.EFF(14),t.nI1(15,"number"),t.k0s(),t.j41(16,"small",22),t.EFF(17,"Percentage"),t.k0s()(),t.j41(18,"div",21)(19,"span",23),t.EFF(20),t.k0s(),t.j41(21,"small",22),t.EFF(22,"Result"),t.k0s()()(),t.j41(23,"div",24)(24,"table",25)(25,"thead",26)(26,"tr")(27,"th"),t.EFF(28,"Subject"),t.k0s(),t.j41(29,"th"),t.EFF(30,"Obtained"),t.k0s(),t.j41(31,"th"),t.EFF(32,"Max"),t.k0s(),t.j41(33,"th"),t.EFF(34,"%"),t.k0s(),t.j41(35,"th"),t.EFF(36,"Status"),t.k0s()()(),t.j41(37,"tbody"),t.DNE(38,r,13,16,"tr",27),t.k0s()()()()),2&o){const l=g.$implicit,m=t.XpG(2);t.R7$(3),t.SpI(" ",l.examId.examTitle," "),t.R7$(2),t.SpI(" Published: ",m.formatDate(l.publishedAt)," "),t.R7$(4),t.Lme("",l.totalMarksObtained," / ",l.totalMaxMarks,""),t.R7$(4),t.AVh("text-success","Pass"===l.status)("text-danger","Fail"===l.status),t.R7$(),t.SpI(" ",t.i5U(15,15,l.percentage,"1.1-1"),"% "),t.R7$(5),t.AVh("bg-success","Pass"===l.status)("bg-danger","Fail"===l.status),t.R7$(),t.SpI(" ",l.status," "),t.R7$(18),t.Y8G("ngForOf",l.subjects)}}function e(o,g){if(1&o&&(t.j41(0,"div"),t.DNE(1,s,39,18,"div",15),t.k0s()),2&o){const l=t.XpG();t.R7$(),t.Y8G("ngForOf",l.results)}}let i=(()=>{class o{constructor(l){this.resultService=l,this.response=null,this.results=[],this.loading=!0,this.noResultMessage="Result not announced yet."}ngOnInit(){this.loadResults()}loadResults(){this.loading=!0,this.resultService.getMyResults().subscribe({next:l=>{this.response=l,this.results=l.data,this.loading=!1},error:l=>{console.error(l),this.response={success:!1,message:"Failed to load results. Please try again.",data:[]},this.loading=!1}})}formatDate(l){return(0,n.Yq)(l,"mediumDate","en-US")||""}static{this.\u0275fac=function(m){return new(m||o)(t.rXU(d.L))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-student-result"]],decls:10,vars:3,consts:[[1,"container","py-4"],[1,"card","shadow-sm","border-0"],[1,"card-header","bg-primary","text-white"],[1,"mb-0"],[1,"fas","fa-trophy","me-2"],[1,"card-body"],["class","text-center py-5",4,"ngIf"],[4,"ngIf"],[1,"text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3","text-muted"],[1,"fas","fa-clock","fa-3x","text-warning","mb-3"],[1,"text-muted"],[1,"text-secondary"],["class","mb-4 p-3 border rounded bg-light",4,"ngFor","ngForOf"],[1,"mb-4","p-3","border","rounded","bg-light"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"mb-0","text-primary","fw-bold"],[1,"badge","bg-success","fs-6"],[1,"row","text-center","mb-3"],[1,"col"],[1,"d-block","text-muted"],[1,"badge","rounded-pill","px-3","py-2","fs-6"],[1,"table-responsive"],[1,"table","table-sm","table-bordered"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"fw-medium"],[1,"text-center"],[1,"badge","rounded-pill"]],template:function(m,E){1&m&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),t.nrm(4,"i",4),t.EFF(5," My Results "),t.k0s()(),t.j41(6,"div",5),t.DNE(7,c,6,0,"div",6)(8,h,6,1,"div",6)(9,e,2,1,"div",7),t.k0s()()()),2&m&&(t.R7$(7),t.Y8G("ngIf",E.loading),t.R7$(),t.Y8G("ngIf",!E.loading&&E.response&&0===E.results.length),t.R7$(),t.Y8G("ngIf",!E.loading&&E.results.length>0))},dependencies:[n.MD,n.Sq,n.bT,n.QX,p.YN],encapsulation:2})}}return o})()},998:(_,u,a)=>{a.d(u,{b:()=>c});var n=a(1626),p=a(6354),t=a(2525),d=a(4438);let c=(()=>{class h{constructor(s){this.http=s,this.apiUrl=t.c.apiUrl}createStudent(s){return this.http.post(`${this.apiUrl}/api/students/add`,s)}getActiveAcademicYear(s){return this.http.get(`${this.apiUrl}/api/academicyear/active/${s}`)}getStudentById(s){return this.http.get(`${this.apiUrl}/api/students/${s}`)}uploadStudentPhoto(s,e){return this.http.put(`${this.apiUrl}/api/students/${s}/photo`,e)}updateStudent(s,e){return this.http.put(`${this.apiUrl}/api/students/${s}`,e)}getStudents(s={}){return this.http.get(`${this.apiUrl}/api/students/list`,{params:s})}deleteStudents(s){return this.http.post(`${this.apiUrl}/api/students/soft-delete`,{studentIds:s})}searchStudents(s,e){return this.http.get(`${this.apiUrl}/api/students/search/${e}`)}studentProgressReport(s){return this.http.post(`${this.apiUrl}/api/notifications/submit-progress-report`,s)}getStudentsByClass(s,e){return this.http.get(`${this.apiUrl}/api/students/get-student-by-class/${s}`,{params:{academicYearId:e}})}createPortal(s,e){const i=new n.Lr({"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}/api/students/create-portal`,{studentId:s,role:e},{headers:i})}fetchStudentsByClassForInvoices(s,e){return this.http.get(`${this.apiUrl}/api/students/get-student-by-class/${s}`,{params:{academicYearId:e}}).pipe((0,p.T)(i=>i.students||[]))}promoteStudents(s){return this.http.post(`${this.apiUrl}/api/students/promote`,s)}getResultsByClassAndAcademicYear(s,e){return this.http.get(`${this.apiUrl}/api/results/class/${s}`,{params:{academicYearId:e}})}static{this.\u0275fac=function(e){return new(e||h)(d.KVO(n.Qq))}}static{this.\u0275prov=d.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},2866:(_,u,a)=>{a.d(u,{$:()=>d});var n=a(2525),p=a(4438),t=a(1626);let d=(()=>{class c{constructor(r){this.http=r,this.apiUrl=n.c.apiUrl}markAttendance(r){return this.http.post(`${this.apiUrl}/api/attendance/mark`,r)}editAttendance(r){return this.http.put(`${this.apiUrl}/api/attendance/edit/${r.attendanceId}`,r)}getAttendanceHistory(r,s,e){let i=`${this.apiUrl}/api/attendance/history/${r}?academicYearId=${s}`;return e&&(i+=`&startDate=${e.startDate}&endDate=${e.endDate}`),console.log("Attendance History URL:",i),this.http.get(i)}getStudentsByClass(r){const s=`${this.apiUrl}/api/attendance/students/${r}`;return console.log("Calling getStudentsByClass with URL:",s),this.http.get(s)}static{this.\u0275fac=function(s){return new(s||c)(p.KVO(t.Qq))}}static{this.\u0275prov=p.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})()},3338:(_,u,a)=>{a.d(u,{v:()=>c});var n=a(2525),p=a(4438),t=a(1626),d=a(6561);let c=(()=>{class h{constructor(s,e){this.http=s,this.authService=e,this.baseUrl=`${n.c.apiUrl}/api/routes`,this.schoolId=null,this.schoolId=this.authService.getUserSchoolId()}createRoute(s){return this.http.post(`${this.baseUrl}`,{...s,schoolId:this.schoolId})}getRoutes(){return this.http.get(`${this.baseUrl}`,{params:{schoolId:this.schoolId||""}})}getRoute(s){return this.http.get(`${this.baseUrl}/${s}`)}updateRoute(s,e){return this.http.put(`${this.baseUrl}/${s}`,e)}deleteRoute(s){return this.http.delete(`${this.baseUrl}/${s}`)}assignRoute(s,e){return this.http.post(`${this.baseUrl}/assign/${s}`,{routeId:e})}static{this.\u0275fac=function(e){return new(e||h)(p.KVO(t.Qq),p.KVO(d.u))}}static{this.\u0275prov=p.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()}}]);