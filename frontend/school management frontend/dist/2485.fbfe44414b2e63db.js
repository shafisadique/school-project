"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[2485],{2485:(C,d,n)=>{n.r(d),n.d(d,{ProfileComponent:()=>E});var e=n(4438),r=n(9417),s=n(749),c=n(5794),f=n(6561),m=n(177),u=n(1413),p=n(8889);const b=()=>["/dashboard"];function g(t,a){1&t&&(e.j41(0,"div",5),e.nrm(1,"div",6),e.k0s())}function _(t,a){if(1&t){const o=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(o);const i=e.XpG(2);return e.Njj(i.enableEditing())}),e.EFF(1,"Edit"),e.k0s()}}function h(t,a){1&t&&(e.j41(0,"button",22),e.EFF(1,"Update"),e.k0s())}function x(t,a){1&t&&(e.j41(0,"small",23),e.EFF(1,"Name is required"),e.k0s())}function P(t,a){1&t&&(e.j41(0,"small",23),e.EFF(1,"Valid email is required"),e.k0s())}function v(t,a){if(1&t){const o=e.RV6();e.j41(0,"form",7),e.bIt("ngSubmit",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.onSubmit())}),e.j41(1,"fieldset",8)(2,"legend",9),e.EFF(3," USER Details "),e.k0s(),e.j41(4,"div",10)(5,"div",11)(6,"div",12)(7,"label",13),e.EFF(8,"Name"),e.k0s(),e.DNE(9,_,2,0,"button",14)(10,h,2,0,"button",15),e.k0s(),e.j41(11,"div",16),e.nrm(12,"input",17)(13,"input",18)(14,"input",19),e.k0s(),e.DNE(15,x,2,0,"small",20)(16,P,2,0,"small",20),e.k0s()()()()}if(2&t){const o=e.XpG();e.Y8G("formGroup",o.profileForm),e.R7$(9),e.Y8G("ngIf",o.p.name.disabled),e.R7$(),e.Y8G("ngIf",!o.p.name.disabled),e.R7$(2),e.Y8G("readonly",o.p.name.disabled),e.R7$(),e.Y8G("readonly",o.p.name.disabled),e.R7$(),e.Y8G("readonly",o.p.name.disabled),e.R7$(),e.Y8G("ngIf",(null==o.p.name?null:o.p.name.invalid)&&(null==o.p.name?null:o.p.name.touched)&&!o.p.name.disabled),e.R7$(),e.Y8G("ngIf",(null==o.p.email?null:o.p.email.invalid)&&(null==o.p.email?null:o.p.email.touched)&&!o.p.name.disabled)}}function y(t,a){1&t&&(e.j41(0,"a",24),e.EFF(1,"Back to Dashboard"),e.k0s()),2&t&&e.Y8G("routerLink",e.lJ4(1,b))}let E=(()=>{class t{constructor(){this.fb=(0,e.WQX)(r.ok),this.authService=(0,e.WQX)(f.u),this.toastr=(0,e.WQX)(c.tw),this.router=(0,e.WQX)(s.Ix),this.loadingService=(0,e.WQX)(p.U),this.profileForm=this.fb.group({name:["",{disabled:!0},[r.k0.required]],username:["",{disabled:!0}],email:["",{disabled:!0},[r.k0.required,r.k0.email]]}),this.profileData=(0,e.vPA)(null),this.destroy$=new u.B}ngOnInit(){this.loadProfile()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadProfile(){this.loadingService.show(),this.authService.getProfile().subscribe({next:o=>{this.profileData.set(o.data),this.profileForm.patchValue({name:o.data.name,username:o.data.username,email:o.data.email}),this.disableEditing(),this.loadingService.hide()},error:o=>{this.toastr.error(o.error?.message||"Error loading profile"),this.loadingService.hide()}})}onSubmit(){this.profileForm.valid&&this.authService.updateProfile(this.profileForm.value).subscribe({next:o=>{this.profileData.set(o.data),this.toastr.success("Profile updated successfully"),this.disableEditing()},error:o=>this.toastr.error(o.error?.message||"Error updating profile")})}enableEditing(){this.profileForm.get("name")?.enable(),this.profileForm.get("username")?.enable(),this.profileForm.get("email")?.enable()}disableEditing(){this.profileForm.get("name")?.disable(),this.profileForm.get("username")?.disable(),this.profileForm.get("email")?.disable()}get p(){return this.profileForm.controls}static{this.\u0275fac=function(l){return new(l||t)}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-profile"]],decls:5,vars:3,consts:[[1,"min-h-screen","bg-gray-100","flex","items-center","justify-center","p-4"],[1,"max-w-[320px]","w-full","bg-white","rounded-lg","shadow-lg","p-4"],["class","flex justify-center mb-2",4,"ngIf"],["class","space-y-3",3,"formGroup","ngSubmit",4,"ngIf"],["class","block text-center text-blue-600 mt-2 hover:text-blue-800 transition duration-200",3,"routerLink",4,"ngIf"],[1,"flex","justify-center","mb-2"],[1,"animate-spin","rounded-full","h-6","w-6","border-t-2","border-b-2","border-blue-500"],[1,"space-y-3",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"bg-gradient-to-r","from-blue-600","to-indigo-500","text-white","text-sm","font-medium","p-2","rounded-t","text-center"],[1,"space-y-2"],[1,"text-center"],[1,"flex","justify-between","items-center","mb-2"],["for","name",1,"block","text-xs","font-medium","text-gray-700"],["type","button","class","btn btn-secondary px-2 py-1 text-xs rounded",3,"click",4,"ngIf"],["type","submit","class","btn btn-primary px-2 py-1 text-xs rounded",4,"ngIf"],[1,"flex","space-x-2"],["id","name","type","text","formControlName","name","value","Shakib Raza",1,"form-control","form-control-sm","shadow-sm","flex-1",3,"readonly"],["id","username","type","text","formControlName","username","value","shakib_raza",1,"form-control","form-control-sm","shadow-sm","flex-1",3,"readonly"],["id","email","type","email","formControlName","email","value","1234sadique1234@gmail.com",1,"form-control","form-control-sm","shadow-sm","flex-1",3,"readonly"],["class","error",4,"ngIf"],["type","button",1,"btn","btn-secondary","px-2","py-1","text-xs","rounded",3,"click"],["type","submit",1,"btn","btn-primary","px-2","py-1","text-xs","rounded"],[1,"error"],[1,"block","text-center","text-blue-600","mt-2","hover:text-blue-800","transition","duration-200",3,"routerLink"]],template:function(l,i){1&l&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,g,2,0,"div",2)(3,v,17,8,"form",3)(4,y,2,2,"a",4),e.k0s()()),2&l&&(e.R7$(2),e.Y8G("ngIf",i.loadingService.isLoading()),e.R7$(),e.Y8G("ngIf",!i.loadingService.isLoading()),e.R7$(),e.Y8G("ngIf",!i.loadingService.isLoading()))},dependencies:[s.iI,s.Wk,r.X1,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,m.MD,m.bT],styles:[".form-section[_ngcontent-%COMP%]{margin-bottom:15px;border:1px solid #e0e0e0;padding:5px;border-radius:5px}.form-section[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4a90e2,#50c9c3);color:#fff;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px;padding:8px 12px;border-radius:5px 5px 0 0;margin-bottom:10px;width:100%;box-sizing:border-box;text-align:center}.form-control[_ngcontent-%COMP%]{display:block;width:100%;padding:.375rem .75rem;font-size:.875rem;line-height:1.5;color:#495057;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;border-radius:.25rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.form-control-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.75rem;line-height:1.5;border-radius:.2rem}.form-control[_ngcontent-%COMP%]:focus{color:#495057;background-color:#fff;border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.shadow-sm[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013!important}.error[_ngcontent-%COMP%]{color:red;font-size:10px}.btn[_ngcontent-%COMP%]{display:inline-block;font-weight:400;text-align:center;white-space:nowrap;vertical-align:middle;-webkit-user-select:none;user-select:none;border:1px solid transparent;padding:.375rem .75rem;font-size:.875rem;line-height:1.5;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.btn-primary[_ngcontent-%COMP%]{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary[_ngcontent-%COMP%]:hover{color:#fff;background-color:#0056b3;border-color:#0056b3;transform:scale(1.05);box-shadow:0 4px 12px #0000001a}.btn-secondary[_ngcontent-%COMP%]{color:#fff;background-color:#6c757d;border-color:#6c757d}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268;border-color:#545b62;transform:scale(1.05);box-shadow:0 4px 12px #0000001a}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}input[readonly][_ngcontent-%COMP%]{background-color:#f8f9fa;cursor:not-allowed}"]})}}return t})()}}]);