"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[2770],{3891:(k,b,l)=>{l.d(b,{e:()=>F});var n=l(1626),C=l(2525),p=l(4438);let F=(()=>{class f{constructor(a){this.http=a,this.apiUrl=C.c.apiUrl}getClassesBySchool(a){return this.http.get(`${this.apiUrl}/api/class-subject-management/classes/${a}`)}getStudentsByClass(a,m){const u=`${this.apiUrl}/api/students/get-student-by-class/${a}`,c=(new n.Nl).set("academicYearId",m);return this.http.get(u,{params:c})}assignRollNumbers(a){return this.http.post(`${this.apiUrl}/api/students/assign-roll-numbers?classId=${a}`,{})}assignRollNumbersAlphabetically(a){return this.http.post(`${this.apiUrl}/api/students/assign-roll-numbers-alphabetically?classId=${a}`,{})}assignRollNumberToStudent(a,m){return this.http.put(`${this.apiUrl}/api/students/${a}/assign-roll-number`,{rollNo:m})}createClass(a){return this.http.post(`${this.apiUrl}/api/class-subject-management/classes`,a)}deleteAssignment(a){return this.http.delete(`${this.apiUrl}/api/class-subject-management/assign-subject`,{body:a})}createSubject(a){return this.http.post(`${this.apiUrl}/api/class-subject-management/subject`,a)}getSubjects(a){return this.http.get(`${this.apiUrl}/api/class-subject-management/subjects/${a}`)}getTeachers(a){return this.http.get(`${this.apiUrl}/api/class-subject-management/teachers/by-school/${a}`)}getCombinedAssignments(a,m){const u=(new n.Nl).set("academicYearId",m);return this.http.get(`${this.apiUrl}/api/class-subject-management/assignments/${a}`,{params:u})}assignSubjectToClass(a,m,u,c){return this.http.post(`${this.apiUrl}/api/class-subject-management/assign-subject`,{classId:a,subjectId:m,teacherId:u,academicYearId:c})}updateAssignment(a){return this.http.put(`${this.apiUrl}/api/class-subject-management/assign-subject`,a)}getAssignmentsByTeacher(a,m,u){let c=(new n.Nl).set("academicYearId",m);return u&&(c=c.set("date",u)),this.http.get(`${this.apiUrl}/api/class-subject-management/assignments/teacher/${a}`,{params:c})}updateAttendanceTeachers(a,m,u){return this.http.put(`${this.apiUrl}/api/class-subject-management/update-attendance-teachers`,{classId:a,attendanceTeacher:m,substituteAttendanceTeachers:u})}getTeacherAttendanceClasses(){return this.http.get(`${this.apiUrl}/api/class-subject-management/teacher-classes`)}static{this.\u0275fac=function(m){return new(m||f)(p.KVO(n.Qq))}}static{this.\u0275prov=p.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}}return f})()},2770:(k,b,l)=>{l.r(b),l.d(b,{StudentUpdateComponent:()=>Q});var n=l(9417),C=l(1413),p=l(6977),F=l(177),f=l(3413),e=l(4438),a=l(3891),m=l(3338),u=l(998),c=l(749),v=l(5794);function h(s,i){1&s&&(e.j41(0,"div",56),e.EFF(1," Name is required "),e.k0s())}function g(s,i){1&s&&(e.j41(0,"div",56),e.EFF(1," Minimum 2 characters "),e.k0s())}function j(s,i){1&s&&(e.j41(0,"div",56),e.EFF(1," 10 digits only "),e.k0s())}function I(s,i){1&s&&(e.j41(0,"div",56),e.EFF(1," Gender required "),e.k0s())}function P(s,i){1&s&&(e.j41(0,"div",56),e.EFF(1," DOB required "),e.k0s())}function S(s,i){if(1&s&&(e.j41(0,"option",31),e.EFF(1),e.k0s()),2&s){const r=i.$implicit;e.Y8G("value",r._id),e.R7$(),e.JRh(r.name)}}function N(s,i){1&s&&(e.j41(0,"option",57),e.EFF(1,"No classes available"),e.k0s())}function U(s,i){1&s&&(e.j41(0,"div",56),e.EFF(1," Class required "),e.k0s())}function $(s,i){if(1&s&&(e.j41(0,"option",31),e.EFF(1),e.k0s()),2&s){const r=i.$implicit;e.Y8G("value",r),e.R7$(),e.JRh(r)}}function R(s,i){1&s&&(e.j41(0,"div",56),e.EFF(1," Section required "),e.k0s())}function T(s,i){1&s&&(e.j41(0,"div",56),e.EFF(1," Status required "),e.k0s())}function D(s,i){if(1&s&&(e.j41(0,"option",31),e.EFF(1),e.k0s()),2&s){const r=i.$implicit;e.Y8G("value",r._id),e.R7$(),e.JRh(r.name)}}function O(s,i){if(1&s&&(e.j41(0,"select",58)(1,"option",16),e.EFF(2,"Select Route"),e.k0s(),e.DNE(3,D,2,2,"option",23),e.k0s()),2&s){const r=e.XpG();e.R7$(3),e.Y8G("ngForOf",r.routes)}}function y(s,i){1&s&&(e.j41(0,"div",56),e.EFF(1," Route required "),e.k0s())}function M(s,i){if(1&s&&(e.j41(0,"div",56),e.EFF(1),e.k0s()),2&s){const r=e.XpG();e.R7$(),e.JRh(r.fileError)}}function G(s,i){if(1&s&&(e.j41(0,"div",59),e.nrm(1,"img",60),e.k0s()),2&s){const r=e.XpG();e.R7$(),e.Y8G("src",r.imagePreview,e.B4B)}}function A(s,i){1&s&&(e.j41(0,"div",56),e.EFF(1," Address required "),e.k0s())}function Y(s,i){1&s&&(e.j41(0,"div",56),e.EFF(1," City required "),e.k0s())}function B(s,i){1&s&&(e.j41(0,"div",56),e.EFF(1," State required "),e.k0s())}function w(s,i){1&s&&(e.j41(0,"div",56),e.EFF(1," Country required "),e.k0s())}function q(s,i){1&s&&(e.j41(0,"div",56),e.EFF(1," Phone required if name given "),e.k0s())}function L(s,i){1&s&&(e.j41(0,"div",56),e.EFF(1," Phone required if name given "),e.k0s())}function K(s,i){1&s&&(e.j41(0,"div",56),e.EFF(1," Phone required if name given "),e.k0s())}function W(s,i){1&s&&(e.j41(0,"div",56),e.EFF(1," Phone required if name given "),e.k0s())}function H(s,i){1&s&&(e.j41(0,"div",56),e.EFF(1," Must be exactly 12 digits "),e.k0s())}function X(s,i){if(1&s&&(e.j41(0,"option",31),e.EFF(1),e.k0s()),2&s){const r=i.$implicit;e.Y8G("value",r.value),e.R7$(),e.SpI(" ",r.label," ")}}function x(s,i){if(1&s&&(e.j41(0,"div",36)(1,"div",61),e.EFF(2),e.k0s()()),2&s){const r=e.XpG();e.R7$(2),e.JRh(r.serverError)}}function V(s,i){1&s&&e.nrm(0,"span",62)}let Q=(()=>{class s{constructor(r,o,t,d,_,E,J){this.fb=r,this.classSvc=o,this.routeSvc=t,this.studentSvc=d,this.route=_,this.router=E,this.toastr=J,this.submitted=!1,this.loading=!1,this.classList=[],this.sectionList=["A","B","C","D","E"],this.routes=[],this.selectedFile=null,this.imagePreview=null,this.fileError="",this.serverError="",this.studentId=null,this.apaarStatusOptions=[{value:"not_generated",label:"Not Generated Yet"},{value:"pending",label:"Pending Generation"},{value:"consent_pending",label:"Consent Form Pending"},{value:"refused",label:"Parent Refused Consent"},{value:"mismatch_error",label:"Aadhaar Mismatch / Error"},{value:"generated",label:"Generated (Has APAAR ID)"}],this.destroy$=new C.B,this.schoolId=localStorage.getItem("schoolId")}ngOnInit(){if(this.studentId=this.route.snapshot.paramMap.get("id"),!this.studentId)return this.toastr.error("Invalid student ID"),void this.router.navigate(["/student/student-details"]);this.initForm(),this.loadClasses(),this.loadRoutes(),this.watchTransport(),this.watchParents(),this.watchApaarId(),this.loadStudent()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initForm(){this.form=this.fb.group({name:["",[n.k0.required,n.k0.minLength(2),n.k0.maxLength(100)]],email:[""],phone:["",[n.k0.pattern(/^\d{10}$/)]],dateOfBirth:["",n.k0.required],gender:["",n.k0.required],classId:["",n.k0.required],section:["",n.k0.required],status:[!0],address:["",[n.k0.required,n.k0.maxLength(200)]],city:["",[n.k0.required,n.k0.maxLength(100)]],state:["",[n.k0.required,n.k0.maxLength(100)]],country:["India",[n.k0.required,n.k0.maxLength(100)]],usesTransport:[!1],routeId:[""],usesHostel:[!1],fatherName:[""],fatherPhone:[""],motherName:[""],motherPhone:[""],apaarId:["",[n.k0.pattern(/^\d{12}$/)]],apaarStatus:["not_generated",n.k0.required],apaarNotes:[""]})}get f(){return this.form.controls}watchTransport(){this.form.get("usesTransport")?.valueChanges.pipe((0,p.Q)(this.destroy$)).subscribe(r=>{const o=this.form.get("routeId");r?o?.setValidators(n.k0.required):o?.clearValidators(),o?.updateValueAndValidity()})}watchParents(){const r=(o,t)=>{this.form.get(o)?.valueChanges.pipe((0,p.Q)(this.destroy$)).subscribe(d=>{const _=this.form.get(t)?.value;if(d&&!_)this.form.get(t)?.setErrors({requiredIfName:!0});else{const E=this.form.get(t)?.errors;E&&E.requiredIfName&&(delete E.requiredIfName,this.form.get(t)?.setErrors(Object.keys(E).length?E:null))}this.form.get(t)?.updateValueAndValidity({emitEvent:!1})})};r("fatherName","fatherPhone"),r("motherName","motherPhone")}watchApaarId(){this.form.get("apaarId")?.valueChanges.pipe((0,p.Q)(this.destroy$)).subscribe(r=>{r&&/^\d{12}$/.test(r.trim())&&this.form.get("apaarStatus")?.setValue("generated")})}loadClasses(){this.classSvc.getClassesBySchool(this.schoolId).pipe((0,p.Q)(this.destroy$)).subscribe({next:r=>this.classList=r.data||r||[],error:()=>{this.toastr.error("Failed to load classes"),this.classList=[]}})}loadRoutes(){this.routeSvc.getRoutes().pipe((0,p.Q)(this.destroy$)).subscribe({next:r=>this.routes=r.data||[],error:()=>this.toastr.error("Failed to load routes")})}loadStudent(){this.studentSvc.getStudentById(this.studentId).pipe((0,p.Q)(this.destroy$)).subscribe({next:r=>{this.form.patchValue({name:r.name,email:r.email||"",phone:r.phone||"",dateOfBirth:new Date(r.dateOfBirth).toISOString().split("T")[0],gender:r.gender,classId:r.classId?._id||r.classId,section:r.section?.[0]||"",status:r.status,address:r.address||"",city:r.city||"",state:r.state||"",country:r.country||"India",usesTransport:r.feePreferences?.usesTransport||!1,usesHostel:r.feePreferences?.usesHostel||!1,fatherName:r.parents?.fatherName||"",fatherPhone:r.parents?.fatherPhone||"",motherName:r.parents?.motherName||"",motherPhone:r.parents?.motherPhone||"",apaarId:r.apaarId||"",apaarStatus:r.apaarStatus||"not_generated",apaarNotes:r.apaarNotes||""}),r.routeId&&this.form.patchValue({routeId:r.routeId?._id||r.routeId}),r.profileImage&&(this.imagePreview=r.profileImage.startsWith("http")?r.profileImage:`https://edglobe.vercel.app/api/proxy-image/${encodeURIComponent(r.profileImage)}`)},error:()=>{this.toastr.error("Failed to load student details"),this.router.navigate(["/student/student-details"])}})}onFileSelect(r){const o=r.target.files[0];if(!o)return;if(!["image/png","image/jpeg","image/jpg"].includes(o.type))return void(this.fileError="Only PNG/JPG/JPEG allowed");if(o.size>2097152)return void(this.fileError="Max 2 MB");this.selectedFile=o,this.fileError="";const t=new FileReader;t.onload=()=>this.imagePreview=t.result,t.readAsDataURL(o)}onSubmit(){this.submitted=!0,this.serverError="";const r=this.form.value;if(!r.fatherName&&!r.motherName)return void(this.serverError="At least one parent name is required");if(this.form.invalid)return;this.loading=!0;const o=this.buildUpdateData(r);this.studentSvc.updateStudent(this.studentId,o).pipe((0,p.Q)(this.destroy$)).subscribe({next:()=>{if(this.selectedFile){const t=new FormData;t.append("profileImage",this.selectedFile),this.studentSvc.uploadStudentPhoto(this.studentId,t).subscribe({next:()=>this.completeSuccess(),error:()=>{this.toastr.warning("Student updated, but photo upload failed"),this.completeSuccess()}})}else this.completeSuccess()},error:t=>{this.loading=!1,this.serverError=this.parseError(t),this.toastr.error(t.error?.message||"Failed to update student")}})}completeSuccess(){this.toastr.success("Student updated successfully"),this.router.navigate(["/student/student-details"])}buildUpdateData(r){const o={};["name","email","phone","dateOfBirth","address","city","state","country","classId","section","gender","status","usesTransport","usesHostel"].forEach(d=>{if(null!=r[d]&&""!==r[d]){if("phone"===d&&r[d]&&!/^\d{10}$/.test(r[d]))return;o[d]="string"==typeof r[d]?r[d].trim():r[d]}}),o.section=[r.section],r.usesTransport&&r.routeId?o.routeId=r.routeId:r.usesTransport||(o.routeId=null);const t={};return["fatherName","fatherPhone","motherName","motherPhone"].forEach(d=>{const _=r[d]?.trim();_&&(t[d]=_)}),Object.keys(t).length&&(o.parents=t),r.apaarId?.trim()&&(o.apaarId=r.apaarId.trim()),o.apaarStatus=r.apaarStatus,r.apaarNotes?.trim()&&(o.apaarNotes=r.apaarNotes.trim()),o}parseError(r){const o=r.error?.message||"";return o.includes("parent")?"Parent details incomplete":o.includes("phone")?"Phone number invalid":o.includes("route")?"Route required for transport":o.includes("APAAR")?"Invalid APAAR ID (must be 12 digits)":o||"Server error"}static{this.\u0275fac=function(o){return new(o||s)(e.rXU(n.ok),e.rXU(a.e),e.rXU(m.v),e.rXU(u.b),e.rXU(c.nX),e.rXU(c.Ix),e.rXU(v.tw))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-student-update"]],decls:205,vars:34,consts:[[1,"container-fluid","py-3","py-md-4"],[1,"row","justify-content-center"],[1,"col-12","col-lg-10","col-xl-9"],["cardTitle","Update Student"],["novalidate","",3,"ngSubmit","formGroup"],[1,"row","g-3"],[1,"form-section"],[1,"col-12","col-md-6"],[1,"form-label"],[1,"text-danger"],["type","text","formControlName","name","placeholder","Full name",1,"form-control","form-control-sm"],["class","text-danger small mt-1",4,"ngIf"],["type","email","formControlName","email","placeholder","student@example.com",1,"form-control","form-control-sm"],[1,"col-12","col-md-4"],["type","text","formControlName","phone","placeholder","10 digits",1,"form-control","form-control-sm"],["formControlName","gender",1,"form-select","form-select-sm"],["value",""],["value","Male"],["value","Female"],["value","Other"],["type","date","formControlName","dateOfBirth",1,"form-control","form-control-sm"],[1,"col-12","col-md-3"],["formControlName","classId",1,"form-select","form-select-sm"],[3,"value",4,"ngFor","ngForOf"],["disabled","",4,"ngIf"],["formControlName","section",1,"form-select","form-select-sm"],["formControlName","status",1,"form-select","form-select-sm"],["value","true"],["value","false"],["class","form-select form-select-sm","formControlName","routeId",4,"ngIf"],["formControlName","usesTransport",1,"form-select","form-select-sm"],[3,"value"],["formControlName","usesHostel",1,"form-select","form-select-sm"],[1,"row","g-3","align-items-center"],["type","file","accept","image/png,image/jpeg,image/jpg",1,"form-control","form-control-sm",3,"change"],["class","col-12 col-md-6 text-center",4,"ngIf"],[1,"col-12"],["type","text","formControlName","address","placeholder","House, Street, Area",1,"form-control","form-control-sm"],["type","text","formControlName","city",1,"form-control","form-control-sm"],["type","text","formControlName","state",1,"form-control","form-control-sm"],["type","text","formControlName","country",1,"form-control","form-control-sm"],["role","alert",1,"alert","alert-info","small","p-2"],["type","text","formControlName","fatherName",1,"form-control","form-control-sm"],["type","text","formControlName","fatherPhone","placeholder","10 digits",1,"form-control","form-control-sm"],["type","text","formControlName","motherName",1,"form-control","form-control-sm"],["type","text","formControlName","motherPhone","placeholder","10 digits",1,"form-control","form-control-sm"],[1,"form-section","mt-4"],[1,"text-muted"],[1,"col-12","col-md-5"],["type","text","formControlName","apaarId","placeholder","12-digit number","maxlength","12",1,"form-control","form-control-sm"],["formControlName","apaarStatus",1,"form-select","form-select-sm"],["type","text","formControlName","apaarNotes","placeholder","e.g. Generated on Jan 2026",1,"form-control","form-control-sm"],["class","col-12",4,"ngIf"],[1,"col-12","d-flex","justify-content-end","gap-2"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],[1,"text-danger","small","mt-1"],["disabled",""],["formControlName","routeId",1,"form-select","form-select-sm"],[1,"col-12","col-md-6","text-center"],["alt","Preview",1,"img-thumbnail",2,"max-height","110px",3,"src"],[1,"alert","alert-danger","small","p-2"],[1,"spinner-border","spinner-border-sm","me-1"]],template:function(o,t){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-card",3)(4,"form",4),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(5,"div",5)(6,"fieldset",6)(7,"legend"),e.EFF(8,"Personal Details"),e.k0s(),e.j41(9,"div",5)(10,"div",7)(11,"label",8),e.EFF(12,"Name "),e.j41(13,"span",9),e.EFF(14,"*"),e.k0s()(),e.nrm(15,"input",10),e.DNE(16,h,2,0,"div",11)(17,g,2,0,"div",11),e.k0s(),e.j41(18,"div",7)(19,"label",8),e.EFF(20,"Email"),e.k0s(),e.nrm(21,"input",12),e.k0s(),e.j41(22,"div",13)(23,"label",8),e.EFF(24,"Phone"),e.k0s(),e.nrm(25,"input",14),e.DNE(26,j,2,0,"div",11),e.k0s(),e.j41(27,"div",13)(28,"label",8),e.EFF(29,"Gender "),e.j41(30,"span",9),e.EFF(31,"*"),e.k0s()(),e.j41(32,"select",15)(33,"option",16),e.EFF(34,"Select"),e.k0s(),e.j41(35,"option",17),e.EFF(36,"Male"),e.k0s(),e.j41(37,"option",18),e.EFF(38,"Female"),e.k0s(),e.j41(39,"option",19),e.EFF(40,"Other"),e.k0s()(),e.DNE(41,I,2,0,"div",11),e.k0s(),e.j41(42,"div",13)(43,"label",8),e.EFF(44,"Date of Birth "),e.j41(45,"span",9),e.EFF(46,"*"),e.k0s()(),e.nrm(47,"input",20),e.DNE(48,P,2,0,"div",11),e.k0s(),e.j41(49,"div",21)(50,"label",8),e.EFF(51,"Class "),e.j41(52,"span",9),e.EFF(53,"*"),e.k0s()(),e.j41(54,"select",22)(55,"option",16),e.EFF(56,"Select Class"),e.k0s(),e.DNE(57,S,2,2,"option",23)(58,N,2,0,"option",24),e.k0s(),e.DNE(59,U,2,0,"div",11),e.k0s(),e.j41(60,"div",21)(61,"label",8),e.EFF(62,"Section "),e.j41(63,"span",9),e.EFF(64,"*"),e.k0s()(),e.j41(65,"select",25)(66,"option",16),e.EFF(67,"Select Section"),e.k0s(),e.DNE(68,$,2,2,"option",23),e.k0s(),e.DNE(69,R,2,0,"div",11),e.k0s(),e.j41(70,"div",21)(71,"label",8),e.EFF(72,"Status "),e.j41(73,"span",9),e.EFF(74,"*"),e.k0s()(),e.j41(75,"select",26)(76,"option",27),e.EFF(77,"Active"),e.k0s(),e.j41(78,"option",28),e.EFF(79,"Inactive"),e.k0s()(),e.DNE(80,T,2,0,"div",11),e.k0s(),e.j41(81,"div",21)(82,"label",8),e.EFF(83,"Route"),e.k0s(),e.DNE(84,O,4,1,"select",29)(85,y,2,0,"div",11),e.k0s()()(),e.j41(86,"fieldset",6)(87,"legend"),e.EFF(88,"Facility Usage"),e.k0s(),e.j41(89,"div",5)(90,"div",13)(91,"label",8),e.EFF(92,"Transport"),e.k0s(),e.j41(93,"select",30)(94,"option",31),e.EFF(95,"No"),e.k0s(),e.j41(96,"option",31),e.EFF(97,"Yes"),e.k0s()()(),e.j41(98,"div",13)(99,"label",8),e.EFF(100,"Hostel"),e.k0s(),e.j41(101,"select",32)(102,"option",31),e.EFF(103,"No"),e.k0s(),e.j41(104,"option",31),e.EFF(105,"Yes"),e.k0s()()()()(),e.j41(106,"fieldset",6)(107,"legend"),e.EFF(108,"Profile Picture"),e.k0s(),e.j41(109,"div",33)(110,"div",7)(111,"label",8),e.EFF(112,"Upload New Profile Picture (Optional)"),e.k0s(),e.j41(113,"input",34),e.bIt("change",function(_){return t.onFileSelect(_)}),e.k0s(),e.DNE(114,M,2,1,"div",11),e.k0s(),e.DNE(115,G,2,1,"div",35),e.k0s()(),e.j41(116,"fieldset",6)(117,"legend"),e.EFF(118,"Address"),e.k0s(),e.j41(119,"div",5)(120,"div",36)(121,"label",8),e.EFF(122,"Full Address "),e.j41(123,"span",9),e.EFF(124,"*"),e.k0s()(),e.nrm(125,"input",37),e.DNE(126,A,2,0,"div",11),e.k0s(),e.j41(127,"div",13)(128,"label",8),e.EFF(129,"City "),e.j41(130,"span",9),e.EFF(131,"*"),e.k0s()(),e.nrm(132,"input",38),e.DNE(133,Y,2,0,"div",11),e.k0s(),e.j41(134,"div",13)(135,"label",8),e.EFF(136,"State "),e.j41(137,"span",9),e.EFF(138,"*"),e.k0s()(),e.nrm(139,"input",39),e.DNE(140,B,2,0,"div",11),e.k0s(),e.j41(141,"div",13)(142,"label",8),e.EFF(143,"Country "),e.j41(144,"span",9),e.EFF(145,"*"),e.k0s()(),e.nrm(146,"input",40),e.DNE(147,w,2,0,"div",11),e.k0s()()(),e.j41(148,"fieldset",6)(149,"legend"),e.EFF(150,"Parents' Details"),e.k0s(),e.j41(151,"div",41),e.EFF(152," At least one parent name and phone is required. "),e.k0s(),e.j41(153,"div",5)(154,"div",7)(155,"label",8),e.EFF(156,"Father's Name"),e.k0s(),e.nrm(157,"input",42),e.k0s(),e.j41(158,"div",7)(159,"label",8),e.EFF(160,"Father's Phone"),e.k0s(),e.nrm(161,"input",43),e.DNE(162,q,2,0,"div",11)(163,L,2,0,"div",11),e.k0s(),e.j41(164,"div",7)(165,"label",8),e.EFF(166,"Mother's Name"),e.k0s(),e.nrm(167,"input",44),e.k0s(),e.j41(168,"div",7)(169,"label",8),e.EFF(170,"Mother's Phone"),e.k0s(),e.nrm(171,"input",45),e.DNE(172,K,2,0,"div",11)(173,W,2,0,"div",11),e.k0s()()(),e.j41(174,"fieldset",46)(175,"legend"),e.EFF(176,"APAAR ID "),e.j41(177,"small",47),e.EFF(178,"(One Nation One Student ID)"),e.k0s()(),e.j41(179,"div",41),e.EFF(180," Update APAAR ID if generated later. Recommended for UDISE+ compliance. "),e.k0s(),e.j41(181,"div",5)(182,"div",48)(183,"label",8),e.EFF(184,"APAAR ID"),e.k0s(),e.nrm(185,"input",49),e.DNE(186,H,2,0,"div",11),e.j41(187,"small",47),e.EFF(188,"Leave blank if not available"),e.k0s()(),e.j41(189,"div",13)(190,"label",8),e.EFF(191,"Status "),e.j41(192,"span",9),e.EFF(193,"*"),e.k0s()(),e.j41(194,"select",50),e.DNE(195,X,2,2,"option",23),e.k0s()(),e.j41(196,"div",21)(197,"label",8),e.EFF(198,"Notes (Optional)"),e.k0s(),e.nrm(199,"input",51),e.k0s()()(),e.DNE(200,x,3,1,"div",52),e.j41(201,"div",53)(202,"button",54),e.DNE(203,V,1,0,"span",55),e.EFF(204),e.k0s()()()()()()()()),2&o){let d;e.R7$(4),e.Y8G("formGroup",t.form),e.R7$(12),e.Y8G("ngIf",t.submitted&&(null==t.f.name.errors?null:t.f.name.errors.required)),e.R7$(),e.Y8G("ngIf",t.submitted&&(null==t.f.name.errors?null:t.f.name.errors.minlength)),e.R7$(9),e.Y8G("ngIf",t.submitted&&(null==t.f.phone.errors?null:t.f.phone.errors.pattern)),e.R7$(15),e.Y8G("ngIf",t.submitted&&(null==t.f.gender.errors?null:t.f.gender.errors.required)),e.R7$(7),e.Y8G("ngIf",t.submitted&&(null==t.f.dateOfBirth.errors?null:t.f.dateOfBirth.errors.required)),e.R7$(9),e.Y8G("ngForOf",t.classList),e.R7$(),e.Y8G("ngIf",0===t.classList.length),e.R7$(),e.Y8G("ngIf",t.submitted&&(null==t.f.classId.errors?null:t.f.classId.errors.required)),e.R7$(9),e.Y8G("ngForOf",t.sectionList),e.R7$(),e.Y8G("ngIf",t.submitted&&(null==t.f.section.errors?null:t.f.section.errors.required)),e.R7$(11),e.Y8G("ngIf",t.submitted&&(null==t.f.status.errors?null:t.f.status.errors.required)),e.R7$(4),e.Y8G("ngIf",null==(d=t.form.get("usesTransport"))?null:d.value),e.R7$(),e.Y8G("ngIf",t.submitted&&(null==t.f.routeId||null==t.f.routeId.errors?null:t.f.routeId.errors.required)),e.R7$(9),e.Y8G("value",!1),e.R7$(2),e.Y8G("value",!0),e.R7$(6),e.Y8G("value",!1),e.R7$(2),e.Y8G("value",!0),e.R7$(10),e.Y8G("ngIf",t.fileError),e.R7$(),e.Y8G("ngIf",t.imagePreview),e.R7$(11),e.Y8G("ngIf",t.submitted&&(null==t.f.address.errors?null:t.f.address.errors.required)),e.R7$(7),e.Y8G("ngIf",t.submitted&&(null==t.f.city.errors?null:t.f.city.errors.required)),e.R7$(7),e.Y8G("ngIf",t.submitted&&(null==t.f.state.errors?null:t.f.state.errors.required)),e.R7$(7),e.Y8G("ngIf",t.submitted&&(null==t.f.country.errors?null:t.f.country.errors.required)),e.R7$(15),e.Y8G("ngIf",t.submitted&&(null==t.f.fatherName?null:t.f.fatherName.value)&&!(null!=t.f.fatherPhone&&t.f.fatherPhone.value)),e.R7$(),e.Y8G("ngIf",t.submitted&&(null==t.f.fatherPhone||null==t.f.fatherPhone.errors?null:t.f.fatherPhone.errors.requiredIfName)),e.R7$(9),e.Y8G("ngIf",t.submitted&&(null==t.f.motherName?null:t.f.motherName.value)&&!(null!=t.f.motherPhone&&t.f.motherPhone.value)),e.R7$(),e.Y8G("ngIf",t.submitted&&(null==t.f.motherPhone||null==t.f.motherPhone.errors?null:t.f.motherPhone.errors.requiredIfName)),e.R7$(13),e.Y8G("ngIf",t.submitted&&(null==t.f.apaarId.errors?null:t.f.apaarId.errors.pattern)),e.R7$(9),e.Y8G("ngForOf",t.apaarStatusOptions),e.R7$(5),e.Y8G("ngIf",t.serverError),e.R7$(2),e.Y8G("disabled",t.loading||t.form.invalid),e.R7$(),e.Y8G("ngIf",t.loading),e.R7$(),e.SpI(" ",t.loading?"Updating...":"Update Student"," ")}},dependencies:[F.MD,F.Sq,F.bT,n.X1,n.qT,n.xH,n.y7,n.me,n.wz,n.BC,n.cb,n.tU,n.j4,n.JD,f.i],styles:[".form-section[_ngcontent-%COMP%]{border:1px solid #e3e6f0;border-radius:8px;padding:1.5rem;margin-bottom:1.5rem;background:#fafbfe}.form-section[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;font-size:.95rem;font-weight:600;text-transform:uppercase;letter-spacing:.8px;padding:.5rem 1rem;border-radius:6px;width:auto;float:none;margin-bottom:1rem}.form-label[_ngcontent-%COMP%]{font-weight:500;color:#2d3748;font-size:.9rem}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{border:1px solid #cbd5e0}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}.text-danger[_ngcontent-%COMP%]{font-size:.8rem}.img-thumbnail[_ngcontent-%COMP%]{border:2px solid #e2e8f0;border-radius:8px}.alert-info[_ngcontent-%COMP%]{background:#ebf8ff;border:1px solid #7dc4e4;color:#0c4a6e}button[disabled][_ngcontent-%COMP%]{opacity:.65;cursor:not-allowed}@media (max-width: 576px){.form-section[_ngcontent-%COMP%]{padding:1rem}legend[_ngcontent-%COMP%]{font-size:.85rem;padding:.4rem .8rem}}"]})}}return s})()},3413:(k,b,l)=>{l.d(b,{i:()=>m});var n=l(4438),C=l(177);const p=["headerOptionsTemplate"],F=["headerTitleTemplate"],f=["*"];function e(u,c){}function a(u,c){if(1&u&&(n.j41(0,"div",2),n.SdG(1),n.k0s()),2&u){const v=n.XpG();n.xc7("padding",v.padding(),"px"),n.Y8G("ngClass",v.blockClass())}}let m=(()=>{class u{constructor(){this.backgroundColor="#ffffff",this.cardTitle=(0,n.hFB)(),this.cardClass=(0,n.hFB)(),this.showContent=(0,n.hFB)(!0),this.blockClass=(0,n.hFB)(),this.headerClass=(0,n.hFB)(),this.showHeader=(0,n.hFB)(!0),this.padding=(0,n.hFB)(20)}static{this.\u0275fac=function(h){return new(h||u)}}static{this.\u0275cmp=n.VBU({type:u,selectors:[["app-card"]],contentQueries:function(h,g,j){if(1&h&&(n.wni(j,p,5),n.wni(j,F,5)),2&h){let I;n.mGM(I=n.lsd())&&(g.headerOptionsTemplate=I.first),n.mGM(I=n.lsd())&&(g.headerTitleTemplate=I.first)}},inputs:{backgroundColor:"backgroundColor",cardTitle:[1,"cardTitle"],cardClass:[1,"cardClass"],showContent:[1,"showContent"],blockClass:[1,"blockClass"],headerClass:[1,"headerClass"],showHeader:[1,"showHeader"],padding:[1,"padding"]},ngContentSelectors:f,decls:3,vars:5,consts:[[1,"card",3,"ngClass"],[1,"card-body",3,"ngClass","padding"],[1,"card-body",3,"ngClass"]],template:function(h,g){1&h&&(n.NAR(),n.j41(0,"div",0),n.DNE(1,e,0,0)(2,a,2,3,"div",1),n.k0s()),2&h&&(n.xc7("background",g.backgroundColor),n.Y8G("ngClass",g.cardClass()),n.R7$(),n.vxM(g.showHeader()?1:-1),n.R7$(),n.vxM(g.showContent()?2:-1))},dependencies:[C.MD,C.YU],encapsulation:2})}}return u})()}}]);