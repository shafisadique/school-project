"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[8061],{8061:(_,i,n)=>{n.r(i),n.d(i,{ChangePasswordComponent:()=>p});var r=n(4438),o=n(9417),d=n(749),f=n(5794),m=n(6561),u=n(177),w=n(1413);const h=()=>["/dashboard"];function c(e,l){1&e&&(r.j41(0,"div",12),r.EFF(1," Current password is required "),r.k0s())}function P(e,l){1&e&&(r.j41(0,"div",12),r.EFF(1," New password must be at least 6 characters "),r.k0s())}function g(e,l){1&e&&(r.j41(0,"div",12),r.EFF(1," Confirm password is required "),r.k0s())}function v(e,l){1&e&&(r.j41(0,"div",12),r.EFF(1," Passwords do not match "),r.k0s())}let p=(()=>{class e{constructor(){this.fb=(0,r.WQX)(o.ok),this.authService=(0,r.WQX)(m.u),this.toastr=(0,r.WQX)(f.tw),this.router=(0,r.WQX)(d.Ix),this.changePasswordForm=this.fb.group({currentPassword:["",[o.k0.required]],newPassword:["",[o.k0.required,o.k0.minLength(6)]],confirmPassword:["",[o.k0.required]]},{validators:this.passwordMatchValidator}),this.destroy$=new w.B}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}passwordMatchValidator(t){return t.get("newPassword")?.value===t.get("confirmPassword")?.value?null:{mismatch:!0}}onSubmit(){if(this.changePasswordForm.valid){const{confirmPassword:t,...a}=this.changePasswordForm.value;this.authService.changePassword(a).subscribe({next:()=>{this.toastr.success("Password changed successfully"),this.router.navigate(["/dashboard"])},error:s=>this.toastr.error(s.error?.message||"Error changing password")})}}get f(){return this.changePasswordForm.controls}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275cmp=r.VBU({type:e,selectors:[["app-change-password"]],decls:21,vars:14,consts:[[1,"min-h-screen","bg-gray-100","flex","items-center","justify-center"],[1,"bg-white","p-8","rounded-lg","shadow-lg","w-full","max-w-md"],[1,"flex","justify-center","mb-6"],["src","assets/images/logo-dark.svg","alt","Logo",1,"h-12"],[1,"text-2xl","font-bold","text-center","text-gray-800","mb-6"],[1,"space-y-4",3,"ngSubmit","formGroup"],["type","password","formControlName","currentPassword","placeholder","Current Password",1,"w-full","p-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["type","password","formControlName","newPassword","placeholder","New Password",1,"w-full","p-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["type","password","formControlName","confirmPassword","placeholder","Confirm New Password",1,"w-full","p-3","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["type","submit",1,"w-full","bg-blue-600","text-white","p-3","rounded-lg","hover:bg-blue-700","transition","duration-200",3,"disabled"],[1,"block","text-center","text-blue-600","mt-4","hover:underline",3,"routerLink"],[1,"text-red-500","text-sm","mt-1"]],template:function(a,s){1&a&&(r.j41(0,"div",0)(1,"div",1)(2,"div",2),r.nrm(3,"img",3),r.k0s(),r.j41(4,"h2",4),r.EFF(5,"Change Password"),r.k0s(),r.j41(6,"form",5),r.bIt("ngSubmit",function(){return s.onSubmit()}),r.j41(7,"div"),r.nrm(8,"input",6),r.DNE(9,c,2,0,"div",7),r.k0s(),r.j41(10,"div"),r.nrm(11,"input",8),r.DNE(12,P,2,0,"div",7),r.k0s(),r.j41(13,"div"),r.nrm(14,"input",9),r.DNE(15,g,2,0,"div",7)(16,v,2,0,"div",7),r.k0s(),r.j41(17,"button",10),r.EFF(18," Change Password "),r.k0s()(),r.j41(19,"a",11),r.EFF(20,"Back to Dashboard"),r.k0s()()()),2&a&&(r.R7$(6),r.Y8G("formGroup",s.changePasswordForm),r.R7$(2),r.AVh("border-red-500",(null==s.f.currentPassword?null:s.f.currentPassword.invalid)&&(null==s.f.currentPassword?null:s.f.currentPassword.touched)),r.R7$(),r.Y8G("ngIf",(null==s.f.currentPassword?null:s.f.currentPassword.invalid)&&(null==s.f.currentPassword?null:s.f.currentPassword.touched)),r.R7$(2),r.AVh("border-red-500",(null==s.f.newPassword?null:s.f.newPassword.invalid)&&(null==s.f.newPassword?null:s.f.newPassword.touched)),r.R7$(),r.Y8G("ngIf",(null==s.f.newPassword?null:s.f.newPassword.invalid)&&(null==s.f.newPassword?null:s.f.newPassword.touched)),r.R7$(2),r.AVh("border-red-500",(null==s.f.confirmPassword?null:s.f.confirmPassword.invalid)&&(null==s.f.confirmPassword?null:s.f.confirmPassword.touched)),r.R7$(),r.Y8G("ngIf",(null==s.f.confirmPassword?null:s.f.confirmPassword.invalid)&&(null==s.f.confirmPassword?null:s.f.confirmPassword.touched)),r.R7$(),r.Y8G("ngIf",(null==s.changePasswordForm.errors?null:s.changePasswordForm.errors.mismatch)&&s.changePasswordForm.touched),r.R7$(),r.Y8G("disabled",s.changePasswordForm.invalid),r.R7$(2),r.Y8G("routerLink",r.lJ4(13,h)))},dependencies:[d.iI,d.Wk,o.X1,o.qT,o.me,o.BC,o.cb,o.j4,o.JD,u.MD,u.bT],encapsulation:2})}}return e})()}}]);