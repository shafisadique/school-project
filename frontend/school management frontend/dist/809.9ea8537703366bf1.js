"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[809],{809:(k,m,l)=>{l.r(m),l.d(m,{ClassSubjectComponent:()=>y});var r=l(9417),u=l(177),e=l(4438),g=l(3891),h=l(5794);function b(t,i){1&t&&(e.j41(0,"div",31),e.nrm(1,"div",32),e.k0s())}function f(t,i){if(1&t&&(e.j41(0,"option",33),e.EFF(1),e.k0s()),2&t){const s=i.$implicit;e.Y8G("value",s),e.R7$(),e.JRh(s)}}function p(t,i){1&t&&(e.j41(0,"div",34),e.EFF(1," Class name is required. "),e.k0s())}function C(t,i){1&t&&(e.j41(0,"div",34),e.EFF(1," Sections are required. "),e.k0s())}function _(t,i){if(1&t&&(e.j41(0,"div",35)(1,"strong",36),e.EFF(2),e.k0s(),e.EFF(3),e.nrm(4,"br"),e.EFF(5),e.nrm(6,"br"),e.EFF(7),e.k0s()),2&t){const s=i.$implicit,o=e.XpG();e.R7$(2),e.JRh(s.name),e.R7$(),e.SpI(" - Sections: ",s.sections.join(", "),""),e.R7$(2),e.SpI(" Attendance Teacher: ",o.getAttendanceTeacher(s.attendanceTeacher),""),e.R7$(2),e.SpI(" Substitute Teachers: ",o.getSubstituteTeachers(s.substituteAttendanceTeachers)," ")}}function v(t,i){1&t&&(e.j41(0,"div",37),e.EFF(1," No classes available. "),e.k0s())}function j(t,i){if(1&t&&(e.j41(0,"option",33),e.EFF(1),e.k0s()),2&t){const s=i.$implicit;e.Y8G("value",s),e.R7$(),e.JRh(s)}}function S(t,i){1&t&&(e.j41(0,"div",34),e.EFF(1," Subject name is required. "),e.k0s())}function E(t,i){if(1&t&&(e.j41(0,"div",35),e.EFF(1),e.k0s()),2&t){const s=i.$implicit;e.R7$(),e.SpI(" ",s.name," ")}}function F(t,i){1&t&&(e.j41(0,"div",37),e.EFF(1," No subjects available. "),e.k0s())}let y=(()=>{class t{constructor(s,o,n){this.fb=s,this.classSubjectService=o,this.toastr=n,this.classes=[],this.subjects=[],this.teachers=[],this.loading=!1,this.classList=["Playgroup","Pre-Nursery","Nursery","Lower KG (LKG)","Upper KG (UKG)","Class 1","Class 2","Class 3","Class 4","Class 5","Class 6","Class 7","Class 8","Class 9","Class 10"],this.classSubjects=["English","English Reading","English Writing","English Rhymes","English Conversation","English Language & Literature","Hindi","Hindi Reading","Hindi Writing","Hindi Rhymes","Hindi Course-A","Hindi Course-B","Mathematics","Mathematics (Standard)","Mathematics (Basic)","Vedic Maths","Science","Science (Physics, Chemistry, Biology)","Environmental Studies (EVS)","Social Science (SST)","Social Science (History, Geography, Civics, Economics)","Sanskrit","Urdu","Bengali","Tamil","Telugu","Kannada","Malayalam","Marathi","Gujarati","Punjabi","Odia","Assamese","Nepali","Arabic","Persian","French","German","Spanish","Computer Science","Computer Applications","Computer Applications (165)","Information Technology (402)","Foundation of IT","Artificial Intelligence (417)","Coding","Robotics","Art & Craft","Drawing / Art & Craft","Colouring","Painting","Art Education","Music","Music (Vocal/Instrumental)","Music & Dance","Dance","Physical Education (PT)","Physical & Health Education","Yoga","Indoor Games","Outdoor Games","Moral Science / Value Education","Value Education","Life Skills","Health & Wellness","General Knowledge (GK)","General Knowledge","Story Telling","Handwriting Improvement","Public Speaking","Personality Development","Abacus","Home Science","Work Experience","SUPW (Socially Useful Productive Work)","Library"].filter((a,c,d)=>d.indexOf(a)===c).sort()}ngOnInit(){this.schoolId=localStorage.getItem("schoolId")||"",this.schoolId?(this.loadClasses(),this.loadSubjects(),this.loadTeachers(),this.classForm=this.fb.group({name:["",r.k0.required],sections:["",r.k0.required],schoolId:[this.schoolId]}),this.subjectForm=this.fb.group({name:["",r.k0.required],schoolId:[this.schoolId]})):this.toastr.error("No school ID found in localStorage!","Error")}loadClasses(){this.loading=!0,this.classSubjectService.getClassesBySchool(this.schoolId).subscribe({next:s=>{this.classes=s,this.loading=!1},error:s=>{this.toastr.error(s.error?.message||"Error fetching classes","Error"),this.loading=!1}})}loadSubjects(){this.loading=!0,this.classSubjectService.getSubjects(this.schoolId).subscribe({next:s=>{this.subjects=s,this.loading=!1},error:s=>{this.toastr.error(s.error?.message||"Error fetching subjects","Error"),this.loading=!1}})}loadTeachers(){this.loading=!0,this.classSubjectService.getTeachers(this.schoolId).subscribe({next:s=>{this.teachers=s,this.loading=!1},error:s=>{this.toastr.error(s.error?.message||"Error fetching teachers","Error"),this.loading=!1}})}addClass(){if(this.classForm.invalid)return void this.toastr.error("Please fill all required fields","Error");this.loading=!0;const s={name:this.classForm.value.name,sections:this.classForm.value.sections.split(",").map(o=>o.trim()),schoolId:this.schoolId};this.classSubjectService.createClass(s).subscribe({next:()=>{this.toastr.success("Class added successfully","Success"),this.loadClasses(),this.classForm.reset({schoolId:this.schoolId}),this.loading=!1},error:o=>{this.toastr.error(o.error?.message||"Error adding class","Error"),this.loading=!1}})}addSubject(){this.subjectForm.invalid?this.toastr.error("Please fill all required fields","Error"):(this.loading=!0,this.classSubjectService.createSubject({name:this.subjectForm.value.name,schoolId:this.schoolId}).subscribe({next:()=>{this.toastr.success("Subject added successfully","Success"),this.loadSubjects(),this.subjectForm.reset({schoolId:this.schoolId}),this.loading=!1},error:o=>{this.toastr.error(o.error?.message||"Error adding subject","Error"),this.loading=!1}}))}getAttendanceTeacher(s){return s?`${s.name} (ID: ${s._id})`:"Not assigned"}getSubstituteTeachers(s){return s&&0!==s.length?s.map(o=>`${o.name} (ID: ${o._id})`).join(", "):"None"}static{this.\u0275fac=function(o){return new(o||t)(e.rXU(r.ok),e.rXU(g.e),e.rXU(h.tw))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-class-subject"]],decls:59,vars:16,consts:[[1,"container-fluid","py-6","bg-gray-50","min-h-screen"],[1,"row","justify-content-center"],[1,"col-12","col-lg-12"],["class","loading-overlay",4,"ngIf"],[1,"row","g-4"],[1,"col-md-6"],[1,"card","bg-white","shadow-xl","rounded-xl","overflow-hidden"],[1,"card-header","bg-gradient-to-r","from-blue-700","to-blue-900","text-white","p-2"],[1,"card-title","text-xl","font-semibold",2,"color","whitesmoke"],[1,"card-body","p-6"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","className",1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"custom-select-wrapper"],["id","className","formControlName","name",1,"custom-select"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","text-danger text-sm mt-1",4,"ngIf"],["for","sections",1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"custom-input-wrapper"],["id","sections","type","text","formControlName","sections","placeholder","e.g., A, B, C",1,"custom-input"],["type","submit",1,"btn-primary","w-100",3,"disabled"],[1,"mt-6"],[1,"text-lg","font-medium","text-gray-700","mb-4"],[1,"space-y-2"],["class","card bg-white shadow-md rounded-lg p-4 hover:bg-gray-50 transition-colors",4,"ngFor","ngForOf"],["class","text-center text-gray-500 p-4",4,"ngIf"],[1,"card-header","bg-gradient-to-r","from-green-700","to-green-900","text-white","p-2"],["for","subjectName",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","subjectName","formControlName","name",1,"custom-select"],["type","submit",1,"btn-success","w-100",3,"disabled"],[1,"loading-overlay"],[1,"spinner"],[3,"value"],[1,"text-danger","text-sm","mt-1"],[1,"card","bg-white","shadow-md","rounded-lg","p-4","hover:bg-gray-50","transition-colors"],[1,"text-gray-900"],[1,"text-center","text-gray-500","p-4"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.DNE(3,b,2,0,"div",3),e.j41(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h5",8),e.EFF(9,"Add Class"),e.k0s()(),e.j41(10,"div",9)(11,"form",10),e.bIt("ngSubmit",function(){return n.addClass()}),e.j41(12,"div",11)(13,"label",12),e.EFF(14,"Select Class"),e.k0s(),e.j41(15,"div",13)(16,"select",14)(17,"option",15),e.EFF(18,"Select Class"),e.k0s(),e.DNE(19,f,2,2,"option",16),e.k0s()(),e.DNE(20,p,2,0,"div",17),e.k0s(),e.j41(21,"div",11)(22,"label",18),e.EFF(23,"Sections (comma-separated)"),e.k0s(),e.j41(24,"div",19),e.nrm(25,"input",20),e.k0s(),e.DNE(26,C,2,0,"div",17),e.k0s(),e.j41(27,"button",21),e.EFF(28),e.k0s()()()(),e.j41(29,"div",22)(30,"h4",23),e.EFF(31,"Existing Classes"),e.k0s(),e.j41(32,"div",24),e.DNE(33,_,8,4,"div",25)(34,v,2,0,"div",26),e.k0s()()(),e.j41(35,"div",5)(36,"div",6)(37,"div",27)(38,"h5",8),e.EFF(39,"Add Subject"),e.k0s()(),e.j41(40,"div",9)(41,"form",10),e.bIt("ngSubmit",function(){return n.addSubject()}),e.j41(42,"div",11)(43,"label",28),e.EFF(44,"Subject Name"),e.k0s(),e.j41(45,"div",13)(46,"select",29)(47,"option",15),e.EFF(48,"Select Subject"),e.k0s(),e.DNE(49,j,2,2,"option",16),e.k0s()(),e.DNE(50,S,2,0,"div",17),e.k0s(),e.j41(51,"button",30),e.EFF(52),e.k0s()()()(),e.j41(53,"div",22)(54,"h4",23),e.EFF(55,"Existing Subjects"),e.k0s(),e.j41(56,"div",24),e.DNE(57,E,2,1,"div",25)(58,F,2,0,"div",26),e.k0s()()()()()()()),2&o){let a,c,d;e.R7$(3),e.Y8G("ngIf",n.loading),e.R7$(8),e.Y8G("formGroup",n.classForm),e.R7$(8),e.Y8G("ngForOf",n.classList),e.R7$(),e.Y8G("ngIf",(null==(a=n.classForm.get("name"))?null:a.invalid)&&(null==(a=n.classForm.get("name"))?null:a.touched)),e.R7$(6),e.Y8G("ngIf",(null==(c=n.classForm.get("sections"))?null:c.invalid)&&(null==(c=n.classForm.get("sections"))?null:c.touched)),e.R7$(),e.Y8G("disabled",n.classForm.invalid||n.loading),e.R7$(),e.SpI(" ",n.loading?"Adding...":"Add Class"," "),e.R7$(5),e.Y8G("ngForOf",n.classes),e.R7$(),e.Y8G("ngIf",0===n.classes.length&&!n.loading),e.R7$(7),e.Y8G("formGroup",n.subjectForm),e.R7$(8),e.Y8G("ngForOf",n.classSubjects),e.R7$(),e.Y8G("ngIf",(null==(d=n.subjectForm.get("name"))?null:d.invalid)&&(null==(d=n.subjectForm.get("name"))?null:d.touched)),e.R7$(),e.Y8G("disabled",n.subjectForm.invalid||n.loading),e.R7$(),e.SpI(" ",n.loading?"Adding...":"Add Subject"," "),e.R7$(5),e.Y8G("ngForOf",n.subjects),e.R7$(),e.Y8G("ngIf",0===n.subjects.length&&!n.loading)}},dependencies:[u.MD,u.Sq,u.bT,r.YN,r.qT,r.xH,r.y7,r.me,r.wz,r.BC,r.cb,r.X1,r.j4,r.JD],styles:['@import"https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap";.container-fluid[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;background-color:#f5f7fa;padding-top:1.5rem;padding-bottom:1.5rem}.card[_ngcontent-%COMP%]{border:none;border-radius:.75rem;overflow:hidden;box-shadow:0 4px 12px #0000000d;transition:transform .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.card-header[_ngcontent-%COMP%]{padding:1.5rem}.card-body[_ngcontent-%COMP%]{padding:2rem}.custom-input-wrapper[_ngcontent-%COMP%], .custom-select-wrapper[_ngcontent-%COMP%]{position:relative}.custom-input[_ngcontent-%COMP%], .custom-select[_ngcontent-%COMP%]{width:100%;padding:.75rem 1.5rem;border:2px solid #e2e8f0;border-radius:.5rem;background:#fff;font-size:.95rem;color:#2d3748;transition:border-color .3s ease,box-shadow .3s ease}.custom-select[_ngcontent-%COMP%]{background:#fff url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="%234a90e2"><path d="M7.293 4.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 011.414-1.414L6 6.586l2.293-2.293z"/></svg>\') no-repeat right .75rem center;background-size:12px;appearance:none;cursor:pointer}.custom-input[_ngcontent-%COMP%]:focus, .custom-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#4a90e2;box-shadow:0 0 0 3px #4a90e233}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4a90e2,#63b3ed);color:#fff;padding:.75rem 1.5rem;border:none;border-radius:.5rem;font-size:1rem;font-weight:500;cursor:pointer;transition:background .3s ease,transform .2s ease}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(90deg,#357abd,#4a90e2);transform:translateY(-2px)}.btn-success[_ngcontent-%COMP%]{background:linear-gradient(90deg,#28a745,#34c759);color:#fff;padding:.75rem 1.5rem;border:none;border-radius:.5rem;font-size:1rem;font-weight:500;cursor:pointer;transition:background .3s ease,transform .2s ease}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background:linear-gradient(90deg,#218838,#28a745);transform:translateY(-2px)}.btn-primary[_ngcontent-%COMP%]:disabled, .btn-success[_ngcontent-%COMP%]:disabled{background:#a0aec0;cursor:not-allowed;transform:none}.card.bg-white.shadow-md[_ngcontent-%COMP%]{padding:1rem;border-radius:.5rem;transition:background .3s ease}.card.bg-white.shadow-md[_ngcontent-%COMP%]:hover{background:#f5f7fa}.text-danger[_ngcontent-%COMP%]{font-size:.875rem}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0000001a;display:flex;justify-content:center;align-items:center;z-index:20}.spinner[_ngcontent-%COMP%]{width:2rem;height:2rem;border:3px solid #f3f3f3;border-top:3px solid #4a90e2;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-right:.5rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.col-md-6[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}.custom-input[_ngcontent-%COMP%], .custom-select[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%], .btn-success[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.9rem}}']})}}return t})()}}]);