"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[9391],{2329:(O,y,r)=>{r.d(y,{G:()=>f});var t=r(2525),m=r(4438),_=r(1626);let f=(()=>{class b{constructor(s){this.http=s,this.apiUrl=t.c.apiUrl}getFeeStructures(s){return this.http.get(`${this.apiUrl}/api/fees/structures`,{params:{schoolId:s}})}getStudentInvoices(s,d){const g={};return d&&(g.academicYearId=d),this.http.get(`${this.apiUrl}/api/fees/invoices/student/${s}`,{params:g})}searchInvoiceStudents(s,d){return this.http.get(`${this.apiUrl}/api/fees/search`,{params:{q:s,schoolId:d}})}createFeeStructure(s){return this.http.post(`${this.apiUrl}/api/fees/structures`,s)}updateFeeStructure(s,d){return this.http.put(`${this.apiUrl}/api/fees/structures/${s}`,d)}deleteFeeStructure(s){return this.http.delete(`${this.apiUrl}/api/fees/structures/${s}`)}generateInvoices(s){return this.http.post(`${this.apiUrl}/api/fees/generate`,s)}getStudentFeeSummary(s){return this.http.get(`${this.apiUrl}/api/fees/students/${s}/summary`)}getInvoiceById(s){return this.http.get(`${this.apiUrl}/api/fees/invoices/${s}`)}generateAdvanceInvoices(s){return this.http.post(`${this.apiUrl}/api/fees/invoices/advance`,s)}processPayment(s,d){return this.http.post(`${this.apiUrl}/api/fees/students/${s}/payments`,d)}getFeeCollectionReport(s){return this.http.get(`${this.apiUrl}/api/fees/reports/collection-details`,{params:s})}generateClassReceipts(s){return this.http.post(`${this.apiUrl}/api/fees/receipts`,s,{responseType:"blob"})}getPaidInvoiceList(s){return this.http.get(`${this.apiUrl}/api/fees/paid-invoices`,{params:s})}getInvoicesByClassAndMonth(s,d,g){return this.http.get(`${this.apiUrl}/api/fees/invoices`,{params:{classId:s,month:d,academicYearId:g}})}getStudentPaymentHistory(s){return this.http.get(`${this.apiUrl}/api/fees/students/${s}/payment-history`)}downloadInvoicePDF(s){return this.http.get(`${this.apiUrl}/api/fees/invoices/${s}/pdf`,{responseType:"blob"})}downloadReceiptPDF(s){return this.http.get(`${this.apiUrl}/api/fees/receipts/${s}/pdf`,{responseType:"blob"})}notifyParents(s,d,g){return this.http.post(`${this.apiUrl}/api/fees/notify-parents`,{classId:s,month:d,academicYearId:g})}static{this.\u0275fac=function(d){return new(d||b)(m.KVO(_.Qq))}}static{this.\u0275prov=m.jDH({token:b,factory:b.\u0275fac,providedIn:"root"})}}return b})()},9391:(O,y,r)=>{r.r(y),r.d(y,{DefaultComponent:()=>q});var t=r(4438),m=r(177),_=r(4626),f=r(9417),b=r(2541),v=r(8167),s=r(4337),d=r(6561),g=r(965),M=r(3891);const P=JSON.parse('[{"id":"84564564","name":"Camera Lens","quantity":"40","status":"Rejected","status_type":"bg-danger","amount":"$40,570"},{"id":"84564786","name":"Laptop","quantity":"300","status":"Pending","status_type":"bg-warning","amount":"$180,139"},{"id":"84564522","name":"Mobile","quantity":"355","status":"Approved","status_type":"bg-success","amount":"$50,139"},{"id":"84564564","name":"Camera Lens","quantity":"40","status":"Rejected","status_type":"bg-danger","amount":"$40,570"},{"id":"84564786","name":"Laptop","quantity":"300","status":"Pending","status_type":"bg-warning","amount":"$180,139"},{"id":"84564522","name":"Mobile","quantity":"355","status":"Approved","status_type":"bg-success","amount":"$50,139"},{"id":"84564564","name":"Camera Lens","quantity":"40","status":"Rejected","status_type":"bg-danger","amount":"$40,570"},{"id":"84564786","name":"Laptop","quantity":"300","status":"Pending","status_type":"bg-warning","amount":"$180,139"},{"id":"84564522","name":"Mobile","quantity":"355","status":"Approved","status_type":"bg-success","amount":"$50,139"},{"id":"84564786","name":"Laptop","quantity":"300","status":"Pending","status_type":"bg-warning","amount":"$180,139"}]');var D=r(8652),w=r(2525);let j=(()=>{class o{transform(n,e,a){return n&&e?[...n].sort((i,c)=>{const l="number"==typeof i[e]?i[e]:(i[e]||"").toString().toLowerCase(),p="number"==typeof c[e]?c[e]:(c[e]||"").toString().toLowerCase();return l<p?"asc"===a?-1:1:l>p?"asc"===a?1:-1:0}):n}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275pipe=t.EJ8({name:"orderBy",type:o,pure:!1})}}return o})();var x=r(2288),S=r(2578),T=r(2329),I=r(5794);const E=["managementChart"],R=["studentChart"],$=["teacherChart"],A=["paymentMethodChart"],B=["monthlyTrendChart"],Y=()=>[1],N=()=>[];function G(o,h){1&o&&(t.j41(0,"div",72),t.EFF(1,"No data available"),t.k0s())}function L(o,h){if(1&o&&(t.qex(0),t.j41(1,"option",73),t.EFF(2),t.k0s(),t.bVm()),2&o){const n=h.$implicit;t.R7$(),t.Y8G("value",n.value),t.R7$(),t.Lme(" ",n.label," ",n.value.split("-")[0]," ")}}function z(o,h){if(1&o&&(t.qex(0),t.j41(1,"option",73),t.EFF(2),t.k0s(),t.bVm()),2&o){const n=h.$implicit;t.R7$(),t.Y8G("value",n._id),t.R7$(),t.JRh(n.name||"Unknown")}}function U(o,h){if(1&o&&(t.qex(0),t.j41(1,"option",73),t.EFF(2),t.k0s(),t.bVm()),2&o){const n=h.$implicit;t.R7$(),t.Y8G("value",n._id),t.R7$(),t.JRh(n.name)}}function V(o,h){if(1&o&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.nI1(7,"number"),t.k0s(),t.j41(8,"td",74),t.EFF(9),t.nI1(10,"number"),t.k0s(),t.j41(11,"td")(12,"span",75),t.EFF(13),t.nI1(14,"number"),t.k0s()(),t.j41(15,"td"),t.EFF(16),t.k0s(),t.j41(17,"td")(18,"div",76)(19,"div",77),t.EFF(20),t.nI1(21,"number"),t.k0s()()()()),2&o){const n=h.$implicit;t.R7$(2),t.JRh(n.className||"Unknown"),t.R7$(2),t.JRh(n.invoiceCount),t.R7$(2),t.SpI("\u20b9",t.bMT(7,11,n.totalAmount),""),t.R7$(3),t.SpI("\u20b9",t.bMT(10,13,n.totalPaid),""),t.R7$(3),t.Y8G("ngClass",n.totalRemainingDue>0?"badge bg-danger":"badge bg-success"),t.R7$(),t.SpI(" \u20b9",t.bMT(14,15,n.totalRemainingDue)," "),t.R7$(3),t.JRh(n.overdueCount),t.R7$(3),t.xc7("width",n.collectionRate+"%"),t.BMQ("aria-valuenow",n.collectionRate),t.R7$(),t.SpI(" ",t.i5U(21,17,n.collectionRate,"1.0-0"),"% ")}}function X(o,h){if(1&o&&(t.qex(0),t.DNE(1,V,22,20,"tr",36),t.nI1(2,"orderBy"),t.bVm()),2&o){const n=t.XpG(2);t.R7$(),t.Y8G("ngForOf",t.brH(2,1,n.breakdownByClass,n.sortColumn,n.sortDirection))}}function J(o,h){1&o&&(t.j41(0,"tr")(1,"td",78),t.EFF(2," No fee data available for the selected filters "),t.k0s()())}function W(o,h){1&o&&(t.j41(0,"div",79),t.EFF(1,"No trend data available"),t.k0s())}function Q(o,h){if(1&o&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td",80),t.EFF(8),t.nI1(9,"number"),t.k0s()()),2&o){const n=h.$implicit;t.R7$(2),t.JRh(n.studentName),t.R7$(2),t.JRh(n.admissionNo),t.R7$(2),t.JRh(n.className),t.R7$(2),t.SpI("\u20b9",t.bMT(9,4,n.remainingDue),"")}}function H(o,h){1&o&&(t.j41(0,"tr")(1,"td",81),t.EFF(2,"No defaulters found"),t.k0s()())}function Z(o,h){if(1&o&&(t.j41(0,"span",82),t.EFF(1),t.k0s()),2&o){const n=t.XpG(2);t.R7$(),t.SpI(" ",n.totalDefaultersCount," ")}}function K(o,h){if(1&o){const n=t.RV6();t.j41(0,"div")(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"div",10)(7,"h2",11),t.EFF(8),t.k0s(),t.j41(9,"p",11),t.EFF(10,"Students"),t.k0s()(),t.j41(11,"div",12),t.nrm(12,"img",13),t.k0s()()()(),t.j41(13,"div",7)(14,"div",8)(15,"div",9)(16,"div",10)(17,"h2",11),t.EFF(18),t.k0s(),t.j41(19,"p",11),t.EFF(20,"Teachers"),t.k0s()(),t.j41(21,"div",12),t.nrm(22,"img",14),t.k0s()()()(),t.j41(23,"div",7)(24,"div",8)(25,"div",9)(26,"div",10)(27,"h2",15),t.EFF(28),t.k0s(),t.j41(29,"p"),t.EFF(30,"Over All Due"),t.k0s()(),t.j41(31,"div",12),t.nrm(32,"img",16),t.k0s()()()(),t.j41(33,"div",7)(34,"div",8)(35,"div",9)(36,"div",10)(37,"h2",17),t.EFF(38),t.k0s(),t.j41(39,"p",11),t.EFF(40,"Paid"),t.k0s()(),t.j41(41,"div",12),t.nrm(42,"img",16),t.k0s()()()()(),t.j41(43,"div",6)(44,"div",18)(45,"div",19)(46,"div",20)(47,"h4",21),t.EFF(48,"Management Value"),t.k0s(),t.j41(49,"div",22)(50,"button",23),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.onPeriodChange("weekly"))}),t.EFF(51,"Weekly"),t.k0s(),t.j41(52,"button",24),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.onPeriodChange("monthly"))}),t.EFF(53,"Monthly"),t.k0s(),t.j41(54,"button",25),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.onPeriodChange("yearly"))}),t.EFF(55,"Yearly"),t.k0s()()(),t.nrm(56,"apx-chart",26,0),t.DNE(58,G,2,0,"div",27),t.k0s()(),t.j41(59,"div",28)(60,"div",29)(61,"h4",30),t.EFF(62,"Filter For Student and Fee Reports"),t.k0s(),t.j41(63,"div",31)(64,"div",6)(65,"div",32)(66,"div",33)(67,"select",34),t.mxI("ngModelChange",function(a){t.eBV(n);const i=t.XpG();return t.DH7(i.selectedMonth,a)||(i.selectedMonth=a),t.Njj(a)}),t.bIt("change",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.onFilterChange())}),t.j41(68,"option",35),t.EFF(69,"-- Select Month --"),t.k0s(),t.DNE(70,L,3,3,"ng-container",36),t.k0s()()(),t.j41(71,"div",32)(72,"div",33)(73,"select",37),t.mxI("ngModelChange",function(a){t.eBV(n);const i=t.XpG();return t.DH7(i.selectedClassId,a)||(i.selectedClassId=a),t.Njj(a)}),t.bIt("change",function(a){t.eBV(n);const i=t.XpG();return t.Njj(i.onClassChange(a))}),t.j41(74,"option",35),t.EFF(75,"All Classes"),t.k0s(),t.DNE(76,z,3,2,"ng-container",36),t.k0s()()(),t.j41(77,"div",32)(78,"div",33)(79,"select",37),t.mxI("ngModelChange",function(a){t.eBV(n);const i=t.XpG();return t.DH7(i.selectedAcademicYearId,a)||(i.selectedAcademicYearId=a),t.Njj(a)}),t.bIt("change",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.onFilterChange())}),t.j41(80,"option",35),t.EFF(81,"Select Academic Year"),t.k0s(),t.DNE(82,U,3,2,"ng-container",36),t.k0s()()(),t.j41(83,"div",38)(84,"button",39),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.exportDefaultersExcel())}),t.EFF(85,"Export Data"),t.k0s()()()(),t.j41(86,"div",40)(87,"h5",41),t.EFF(88),t.k0s(),t.j41(89,"h5",41),t.EFF(90),t.k0s()(),t.j41(91,"div",42)(92,"h5",41),t.EFF(93),t.k0s(),t.j41(94,"h5",41),t.EFF(95),t.k0s()()()()(),t.j41(96,"div",43)(97,"div",7)(98,"div",8)(99,"div",9)(100,"div",10)(101,"h2",11),t.EFF(102),t.nI1(103,"number"),t.k0s(),t.j41(104,"p",11),t.EFF(105,"Total Remaining Due"),t.k0s()(),t.j41(106,"div",12),t.nrm(107,"img",13),t.k0s()()()(),t.j41(108,"div",7)(109,"div",8)(110,"div",9)(111,"div",10)(112,"h2",11),t.EFF(113),t.nI1(114,"number"),t.k0s(),t.j41(115,"p",11),t.EFF(116,"Total Paid"),t.k0s()(),t.j41(117,"div",12),t.nrm(118,"img",14),t.k0s()()()(),t.j41(119,"div",7)(120,"div",8)(121,"div",9)(122,"div",10)(123,"h2",11),t.EFF(124),t.k0s(),t.j41(125,"p",11),t.EFF(126,"Overdue Invoices"),t.k0s()(),t.j41(127,"div",12),t.nrm(128,"img",16),t.k0s()()()(),t.j41(129,"div",7)(130,"div",8)(131,"div",9)(132,"div",10)(133,"h2",11),t.EFF(134),t.k0s(),t.j41(135,"p",11),t.EFF(136,"Collection Rate"),t.k0s()(),t.j41(137,"div",12),t.nrm(138,"img",16),t.k0s()()()()(),t.j41(139,"div",6)(140,"div",44)(141,"div",45)(142,"div",46)(143,"h5",47),t.EFF(144,"Class-wise Fee Breakdown"),t.k0s()(),t.j41(145,"div",48)(146,"table",49)(147,"thead",50)(148,"tr")(149,"th",51),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.sortTable("className","breakdownByClass"))}),t.EFF(150,"Class"),t.k0s(),t.j41(151,"th",51),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.sortTable("invoiceCount","breakdownByClass"))}),t.EFF(152,"Invoices"),t.k0s(),t.j41(153,"th",51),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.sortTable("totalAmount","breakdownByClass"))}),t.EFF(154,"Total Amount (\u20b9)"),t.k0s(),t.j41(155,"th",51),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.sortTable("totalPaid","breakdownByClass"))}),t.EFF(156,"Paid Amount (\u20b9)"),t.k0s(),t.j41(157,"th",51),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.sortTable("totalRemainingDue","breakdownByClass"))}),t.EFF(158,"Remaining Due (\u20b9)"),t.k0s(),t.j41(159,"th",51),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.sortTable("overdueCount","breakdownByClass"))}),t.EFF(160,"Overdue"),t.k0s(),t.j41(161,"th",51),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.sortTable("collectionRate","breakdownByClass"))}),t.EFF(162,"Collection Rate"),t.k0s()()(),t.j41(163,"tbody"),t.DNE(164,X,3,5,"ng-container",52)(165,J,3,0,"ng-template",null,1,t.C5r),t.k0s()()()(),t.j41(167,"div",19)(168,"h5",53),t.EFF(169,"Payment Method & Monthly Trend (Last 6 Months)"),t.k0s(),t.j41(170,"div",6)(171,"div",54),t.nrm(172,"apx-chart",55,2),t.k0s(),t.j41(174,"div",54),t.nrm(175,"apx-chart",56,3),t.k0s()(),t.DNE(177,W,2,0,"div",57),t.k0s()(),t.j41(178,"div",58)(179,"div",45)(180,"div",46)(181,"h5",47),t.EFF(182," Top Defaulters "),t.j41(183,"small",59),t.EFF(184),t.k0s()(),t.j41(185,"button",60),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.viewAllDefaulters())}),t.EFF(186," View All "),t.k0s()(),t.j41(187,"div",61)(188,"table",62)(189,"thead",63)(190,"tr")(191,"th"),t.EFF(192,"Name"),t.k0s(),t.j41(193,"th"),t.EFF(194,"Admission No."),t.k0s(),t.j41(195,"th"),t.EFF(196,"Class"),t.k0s(),t.j41(197,"th"),t.EFF(198,"Due (\u20b9)"),t.k0s()()(),t.j41(199,"tbody"),t.DNE(200,Q,10,6,"tr",36)(201,H,3,0,"tr",4),t.k0s()()(),t.j41(202,"div",64)(203,"button",65),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.sendSMSReminders())}),t.nrm(204,"i",66),t.EFF(205," Send SMS Reminder "),t.DNE(206,Z,2,1,"span",67),t.k0s(),t.j41(207,"button",68),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.generateReceipts())}),t.nrm(208,"i",69),t.EFF(209," Generate Receipts (ZIP) "),t.k0s(),t.j41(210,"button",70),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.exportDefaultersExcel())}),t.nrm(211,"i",71),t.EFF(212," Export Excel "),t.k0s()()()()()()()}if(2&o){const n=t.sdS(166),e=t.XpG();t.R7$(8),t.JRh(e.totalStudent),t.R7$(10),t.JRh(e.totalTeacher),t.R7$(10),t.JRh(e.overallDue),t.R7$(10),t.JRh(e.overallPaid),t.R7$(18),t.Y8G("series",e.managementChartOptions.series)("chart",e.managementChartOptions.chart)("stroke",e.managementChartOptions.stroke)("dataLabels",e.managementChartOptions.dataLabels)("markers",e.managementChartOptions.markers)("xaxis",e.managementChartOptions.xaxis)("yaxis",e.managementChartOptions.yaxis)("grid",e.managementChartOptions.grid)("fill",e.managementChartOptions.fill)("theme",e.managementChartOptions.theme)("legend",e.managementChartOptions.legend)("tooltip",e.managementChartOptions.tooltip),t.R7$(2),t.Y8G("ngIf",!(null!=e.managementChartOptions.series&&e.managementChartOptions.series.length)),t.R7$(9),t.R50("ngModel",e.selectedMonth),t.R7$(3),t.Y8G("ngForOf",e.getMonthsForYear()),t.R7$(3),t.R50("ngModel",e.selectedClassId),t.R7$(3),t.Y8G("ngForOf",e.classes),t.R7$(3),t.R50("ngModel",e.selectedAcademicYearId),t.R7$(3),t.Y8G("ngForOf",e.academicYears),t.R7$(6),t.SpI("Total Student Present: ",e.studentPresent,""),t.R7$(2),t.SpI("Total Student Absent: ",e.studentAbsent,""),t.R7$(3),t.SpI("Total Teacher Present: ",e.teacherPresent,""),t.R7$(2),t.SpI("Total Teacher Absent: ",e.teacherAbsent,""),t.R7$(7),t.SpI("\u20b9",t.bMT(103,60,e.summary.totalRemainingDue),""),t.R7$(11),t.SpI("\u20b9",t.bMT(114,62,e.summary.totalPaid),""),t.R7$(11),t.JRh(e.summary.overdueCount),t.R7$(10),t.SpI("",e.summary.collectionRate,"%"),t.R7$(30),t.Y8G("ngIf",e.breakdownByClass.length)("ngIfElse",n),t.R7$(8),t.Y8G("series",(null==e.paymentMethodChartOptions?null:e.paymentMethodChartOptions.series)||t.lJ4(64,Y))("chart",null==e.paymentMethodChartOptions?null:e.paymentMethodChartOptions.chart)("labels",null==e.paymentMethodChartOptions?null:e.paymentMethodChartOptions.labels)("colors",null==e.paymentMethodChartOptions?null:e.paymentMethodChartOptions.colors)("legend",null==e.paymentMethodChartOptions?null:e.paymentMethodChartOptions.legend)("responsive",null==e.paymentMethodChartOptions?null:e.paymentMethodChartOptions.responsive)("fill",null==e.paymentMethodChartOptions?null:e.paymentMethodChartOptions.fill)("dataLabels",null==e.paymentMethodChartOptions?null:e.paymentMethodChartOptions.dataLabels)("plotOptions",null==e.paymentMethodChartOptions?null:e.paymentMethodChartOptions.plotOptions),t.R7$(3),t.Y8G("series",(null==e.monthlyTrendChartOptions?null:e.monthlyTrendChartOptions.series)||t.lJ4(65,N))("chart",null==e.monthlyTrendChartOptions?null:e.monthlyTrendChartOptions.chart)("xaxis",null==e.monthlyTrendChartOptions?null:e.monthlyTrendChartOptions.xaxis)("colors",null==e.monthlyTrendChartOptions?null:e.monthlyTrendChartOptions.colors)("legend",null==e.monthlyTrendChartOptions?null:e.monthlyTrendChartOptions.legend)("responsive",null==e.monthlyTrendChartOptions?null:e.monthlyTrendChartOptions.responsive)("stroke",null==e.monthlyTrendChartOptions?null:e.monthlyTrendChartOptions.stroke)("fill",null==e.monthlyTrendChartOptions?null:e.monthlyTrendChartOptions.fill)("markers",null==e.monthlyTrendChartOptions?null:e.monthlyTrendChartOptions.markers),t.R7$(2),t.Y8G("ngIf",!e.monthlyTrend.length),t.R7$(7),t.Lme(" (",e.topDefaulters.length," of ",e.totalDefaultersCount||e.topDefaulters.length,") "),t.R7$(16),t.Y8G("ngForOf",e.topDefaulters),t.R7$(),t.Y8G("ngIf",0===e.topDefaulters.length),t.R7$(2),t.Y8G("disabled",0===e.totalDefaultersCount),t.R7$(3),t.Y8G("ngIf",e.totalDefaultersCount>0),t.R7$(),t.Y8G("disabled",0===e.totalDefaultersCount),t.R7$(3),t.Y8G("disabled",0===e.totalDefaultersCount)}}let q=(()=>{class o{constructor(n){this.toastr=n,this.managementChart=(0,t.ebz)("managementChart"),this.managementChartOptions={chart:{height:295,type:"area",toolbar:{show:!1},background:"transparent",foreColor:"#333"},stroke:{curve:"smooth",width:2},dataLabels:{enabled:!1},markers:{size:4,colors:["#fff"],strokeWidth:2,strokeColors:["#42a5f5","#f2e41fff","#ff7043"]},series:[{name:"Present",data:[],color:"#42a5f5"},{name:"Late",data:[],color:"#f2e41fff"},{name:"Absent",data:[],color:"#ff7043"}],fill:{type:"gradient",gradient:{shadeIntensity:.8,type:"vertical",opacityFrom:.7,opacityTo:.2,colorStops:[{offset:0,color:"#42a5f5",opacity:.7},{offset:100,color:"#e0f7fa",opacity:.2}]}},xaxis:{categories:[],labels:{style:{colors:"#8c8c8c",fontFamily:"Poppins, sans-serif"}},axisBorder:{show:!0,color:"#e0e0e0"},axisTicks:{show:!1}},yaxis:{min:0,max:1e3,tickAmount:5,labels:{style:{colors:"#8c8c8c",fontFamily:"Poppins, sans-serif"}}},grid:{strokeDashArray:4,borderColor:"#e0e0e0"},theme:{mode:"light"},legend:{show:!0,position:"bottom",horizontalAlign:"center",labels:{colors:"#333"}},tooltip:{theme:"light",x:{show:!0}}},this.iconService=(0,t.WQX)(b.fM),this.dashboardService=(0,t.WQX)(s.I),this.academicYearService=(0,t.WQX)(g.y),this.classSubjectService=(0,t.WQX)(M.e),this.authService=(0,t.WQX)(d.u),this.feeService=(0,t.WQX)(T.G),this.modalService=(0,t.WQX)(D.Bq),this.subscriptionData={},this.isExpiringSoon=!1,this.isExpired=!1,this.isPending=!1,this.selectedPlan="basic",this.plans=[{value:"basic",name:"Basic",price:500,features:["Up to 5 users","Basic features","1 year support"]},{value:"premium",name:"Premium",price:1e3,features:["Unlimited users","All features","Priority support"]}],this.recentOrder=P,this.AnalyticEcommerce=[{title:"Total Page Views",amount:"4,42,236",background:"bg-light-primary",border:"border-primary",icon:"rise",percentage:"59.3%",color:"text-primary",number:"35,000"},{title:"Total Users",amount:"78,250",background:"bg-light-primary",border:"border-primary",icon:"rise",percentage:"70.5%",color:"text-primary",number:"8,900"},{title:"Total Order",amount:"18,800",background:"bg-light-warning",border:"border-warning",icon:"fall",percentage:"27.4%",color:"text-warning",number:"1,943"},{title:"Total Sales",amount:"$35,078",background:"bg-light-warning",border:"border-warning",icon:"fall",percentage:"27.4%",color:"text-warning",number:"$20,395"}],this.transaction=[{background:"text-success bg-light-success",icon:"gift",title:"Order #002434",time:"Today, 2:00 AM",amount:"+ $1,430",percentage:"78%"},{background:"text-primary bg-light-primary",icon:"message",title:"Order #984947",time:"5 August, 1:45 PM",amount:"- $302",percentage:"8%"},{background:"text-danger bg-light-danger",icon:"setting",title:"Order #988784",time:"7 hours ago",amount:"- $682",percentage:"16%"}],this.studentAttendanceData={},this.totalStudents=0,this.studentPresent=0,this.studentAbsent=0,this.classes=[],this.selectedClassId="",this.studentChartOptions={},this.studentChart=(0,t.ebz)("studentChart"),this.selectedPeriod="weekly",this.teacherDashboardData={},this.totalTeachers=0,this.teacherPresent=0,this.teacherAbsent=0,this.teacherOnLeave=0,this.pendingLeaveRequests=0,this.autoGeneratedAbsences=0,this.averageLeaveBalance=0,this.isHoliday=!1,this.teacherChartOptions={},this.teacherChart=(0,t.ebz)("teacherChart"),this.totalDefaultersCount=0,this.summary={totalRemainingDue:0,totalPaid:0,overdueCount:0,collectionRate:0,invoiceCount:0},this.breakdownByClass=[],this.paymentMethods=[],this.topDefaulters=[],this.monthlyTrend=[],this.academicYears=[],this.selectedMonth="",this.selectedAcademicYearId="",this.selectedPaymentMethod="razorpay",this.paymentProof=null,this.bankDetails=null,this.subscriptionId=null,this.paymentMethodChart=(0,t.ebz)("paymentMethodChart"),this.monthlyTrendChart=(0,t.ebz)("monthlyTrendChart"),this.paymentMethodChartOptions={},this.monthlyTrendChartOptions={},this.isViewInitialized=!1,this.isAdmin=!1,this.sortColumn="",this.sortDirection="asc",this.iconService.addIcon(v.QCV,v.aRQ,v.Blt,v.HiO,v.c2)}ngOnInit(){if(this.isAdmin="admin"===this.authService.getUserRole(),this.isAdmin){const n=new Date;this.selectedMonth=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`,this.fetchClassesAndAcademicYears(),this.fetchSubscription(),this.fetchDataBasedOnRole()}}fetchDataBasedOnRole(){"admin"===this.authService.getUserRole()&&(this.fetchStudentAttendance(),this.fetchTeacherDashboard(),this.fetchFeeDashboard(),this.fetchAllDashboardDetails())}fetchAllDashboardDetails(){this.dashboardService.getDashboardStats().subscribe(n=>{this.totalStudent=n?.totalActiveStudents,this.totalTeacher=n?.totalActiveTeachers,this.overallDue=n?.overallDue,this.overallPaid=n.overallPaid})}fetchSubscription(){this.dashboardService.getSubscription().subscribe({next:n=>{this.subscriptionData=n,this.isExpiringSoon=n.isExpiringSoon,this.isExpired="expired"===n.subscriptionStatus,this.isPending="pending"===n.subscriptionStatus},error:n=>console.error("Error fetching subscription:",n)})}openUpgradeModal(n){this.selectedPaymentMethod="razorpay",this.paymentProof=null,this.bankDetails=null,this.subscriptionId=null,this.modalService.open(n,{centered:!0,size:"lg",windowClass:"custom-modal",backdrop:"static"})}onFileChange(n){const e=n.target;e.files&&e.files.length&&(this.paymentProof=e.files[0])}upgradePlan(){this.dashboardService.upgradeSubscription({planType:this.selectedPlan,paymentMethod:this.selectedPaymentMethod}).subscribe({next:n=>{if("bank_transfer"===this.selectedPaymentMethod)return this.bankDetails=n.bankDetails,void(this.subscriptionId=n.subscriptionId);const{order:e}=n,a={key:w.c.razorpayKey,amount:e.amount,currency:e.currency,name:"School Management",description:`Upgrade to ${this.selectedPlan}`,order_id:e.id,handler:c=>{this.verifyPayment(c)},theme:{color:"#4a90e2"},..."phonepe"===this.selectedPaymentMethod&&{upi:{flow:"intent",upi_intent:"phonepe"}}},i=new window.Razorpay(a);i.on("payment.failed",c=>{console.error("Payment failed:",c.error),alert("Payment failed. Please try again.")}),i.open()},error:n=>{console.error("Error initiating upgrade:",n),alert("Failed to initiate payment. Please try again.")}})}uploadPaymentProof(){this.paymentProof&&this.subscriptionId?this.dashboardService.uploadPaymentProof(this.subscriptionId,this.paymentProof).subscribe({next:()=>{alert("Payment proof uploaded. Awaiting verification."),this.fetchSubscription(),this.modalService.dismissAll()},error:n=>{console.error("Error uploading payment proof:",n),alert("Failed to upload payment proof. Please try again.")}}):alert("Please select a file to upload.")}verifyPayment(n){this.dashboardService.verifyPayment(n).subscribe({next:()=>{alert("Subscription upgraded successfully!"),this.fetchSubscription(),this.modalService.dismissAll()},error:e=>{console.error("Payment verification failed:",e),alert("Payment verification failed. Please contact support.")}})}ngAfterViewInit(){this.isAdmin&&(this.isViewInitialized=!0,setTimeout(()=>this.updateCharts(),100))}fetchClassesAndAcademicYears(){const n=this.authService.getUserSchoolId()||"";if(!n)return console.error("No schoolId found in authService. Please ensure user is authenticated."),this.classes=[],void(this.academicYears=[]);this.classSubjectService.getClassesBySchool(n).subscribe({next:e=>{this.classes=e||[],this.classes.length||console.warn("No classes found for schoolId:",n)},error:e=>{console.error("Error fetching classes:",e),this.classes=[]}}),this.academicYearService.getAllAcademicYears(n).subscribe({next:e=>{this.academicYears=e||[],this.academicYears.length?this.academicYearService.getActiveAcademicYear(n).subscribe({next:a=>{this.selectedAcademicYearId=a?._id||this.academicYears[0]?._id||"",this.selectedAcademicYearId?(this.fetchFeeDashboard(),this.fetchStudentAttendance()):console.warn("No active academic year found for schoolId:",n)},error:a=>{console.error("Error fetching active academic year:",a),this.selectedAcademicYearId=""}}):(console.warn("No academic years found for schoolId:",n),this.selectedAcademicYearId="")},error:e=>{console.error("Error fetching academic years:",e),this.academicYears=[]}})}fetchStudentAttendance(n=""){this.dashboardService.getStudentAttendance({classId:n,academicYearId:this.selectedAcademicYearId,period:this.selectedPeriod,month:this.selectedMonth||void 0}).subscribe({next:a=>{this.studentAttendanceData=a||{},this.totalStudents=a.totalStudents||0;const i=a.attendance;this.studentPresent=i?.Present.reduce((l,p)=>l+p,0)||0,this.studentAbsent=i?.Absent.reduce((l,p)=>l+p,0)||0,i?.Late.reduce((l,p)=>l+p,0),this.updateManagementChartData(i.Present,i.Absent,i.Late,a.categories),this.prepareStudentChartData()},error:a=>console.error("Error fetching student attendance:",a)})}fetchTeacherDashboard(){this.dashboardService.getTeacherData().subscribe({next:n=>{this.teacherDashboardData=n||{},this.totalTeachers=n.totalTeachers||0,this.teacherPresent=n.presentToday||0,this.teacherAbsent=n.absentToday||0,this.teacherOnLeave=n.onLeaveToday||0,this.pendingLeaveRequests=n.pendingLeaveRequests||0,this.autoGeneratedAbsences=n.autoGeneratedAbsences||0,this.averageLeaveBalance=n.averageLeaveBalance||0,this.isHoliday=n.isHoliday||!1,this.prepareTeacherChartData()},error:n=>console.error("Error fetching teacher dashboard:",n)})}fetchFeeDashboard(){this.selectedAcademicYearId?this.dashboardService.getFeeDashboard({month:this.selectedMonth,classId:this.selectedClassId||void 0,academicYearId:this.selectedAcademicYearId}).subscribe({next:e=>{this.summary=e.summary||{totalRemainingDue:0,totalPaid:0,overdueCount:0,collectionRate:0,invoiceCount:0},this.breakdownByClass=e.breakdownByClass||[],this.paymentMethods=e.paymentMethods||[],this.topDefaulters=e.topDefaulters||[],this.monthlyTrend=e.monthlyTrend||[],this.totalDefaultersCount=e.totalDefaultersCount||e.topDefaulters.length,this.prepareCharts()},error:e=>console.error("Error fetching fee dashboard:",e)}):console.warn("No academic year selected, skipping fee dashboard fetch")}viewAllDefaulters(){}updateManagementChartData(n,e,a,i){const c=i.length,l=[...n,...Array(c-n.length).fill(0)].slice(0,c),p=[...e,...Array(c-e.length).fill(0)].slice(0,c),u=[...a,...Array(c-a.length).fill(0)].slice(0,c);this.managementChartOptions={...this.managementChartOptions,series:[{name:"Present",data:l,color:"#42a5f5"},{name:"Late",data:u,color:"#f2e41fff"},{name:"Absent",data:p,color:"#ff7043"}],xaxis:{...this.managementChartOptions.xaxis,categories:i}};const C=[...l,...p,...u],k=Math.max(...C,10);if(this.managementChartOptions.yaxis={...this.managementChartOptions.yaxis,max:10*Math.ceil(k/10)||120},this.isViewInitialized&&this.managementChart())try{this.managementChart()?.updateOptions({series:[],xaxis:{categories:[]}},!1,!0)}catch(F){console.error("Error updating chart:",F)}}onPeriodChange(n){this.selectedPeriod=n,this.fetchStudentAttendance(this.selectedClassId)}sortTable(n,e){this.sortColumn===n?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=n,this.sortDirection="asc")}prepareCharts(){this.paymentMethodChartOptions={chart:{type:"pie",height:300,toolbar:{show:!1}},series:this.paymentMethods.length?this.paymentMethods.map(n=>n.totalAmount):[1],labels:this.paymentMethods.length?this.paymentMethods.map(n=>n.method||"Unknown"):["No Data"],colors:["#007BFF","#198754","#dc3545"],fill:{type:"gradient",gradient:{shade:"light",type:"vertical",opacityFrom:.8,opacityTo:.4,stops:[0,100]}},dataLabels:{enabled:!0,formatter:n=>`${n}%`,style:{colors:["#fff"],fontSize:"12px",fontFamily:"Poppins, sans-serif"}},legend:{position:"bottom",fontSize:"12px",fontFamily:"Poppins, sans-serif",labels:{colors:"#333"}},plotOptions:{pie:{donut:{size:"65%",labels:{show:!0,name:{show:!1},value:{show:!0,fontSize:"20px",fontFamily:"Poppins, sans-serif",color:"#333",formatter:()=>{const n=this.paymentMethods.reduce((e,a)=>e+a.totalAmount,0);return n?`Total: \u20b9${n.toLocaleString()}`:"No Data"}}}}}},responsive:[{breakpoint:480,options:{chart:{height:200},plotOptions:{pie:{donut:{size:"50%"}}}}}]},this.monthlyTrendChartOptions={chart:{type:"line",height:250,toolbar:{show:!1},foreColor:"#333"},series:[{name:"Paid",data:this.monthlyTrend.map(n=>n.totalPaid||0),color:"#007BFF"},{name:"Remaining Due",data:this.monthlyTrend.map(n=>n.totalRemainingDue||0),color:"#dc3545"}],stroke:{curve:"smooth",width:3,colors:["#007BFF","#dc3545"]},fill:{type:"gradient",gradient:{shade:"light",type:"vertical",shadeIntensity:.5,gradientToColors:["#a0afe8","#f8d7da"],opacityFrom:.7,opacityTo:.3,stops:[0,100]}},markers:{size:5,colors:["#007BFF","#dc3545"],strokeWidth:2,strokeColors:"#fff",hover:{size:7}},xaxis:{categories:this.monthlyTrend.map(n=>n.month||"Unknown"),labels:{style:{colors:"#666",fontSize:"12px",fontFamily:"Poppins, sans-serif"}},axisBorder:{show:!0,color:"#e0e0e0"},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"#666",fontSize:"12px",fontFamily:"Poppins, sans-serif"},formatter:n=>`\u20b9${n.toLocaleString()}`}},grid:{borderColor:"#e0e0e0",strokeDashArray:4},legend:{position:"bottom",fontSize:"12px",fontFamily:"Poppins, sans-serif",labels:{colors:"#333"}},tooltip:{theme:"light",y:{formatter:n=>`\u20b9${n.toLocaleString()}`}},responsive:[{breakpoint:480,options:{chart:{height:200}}}]},this.isViewInitialized&&this.updateCharts()}prepareStudentChartData(){const n=this.selectedClassId?this.studentAttendanceData?.classAttendance:this.studentAttendanceData?.overallAttendance;this.studentChartOptions={chart:{type:"pie",height:220,toolbar:{show:!1}},labels:["Present","Absent","Late"],series:n?[n.Present||0,n.Absent||0,n.Late||0]:[0,0,0],colors:["#36A2EB","#FF6384","#FFCE56"],legend:{position:"bottom",fontSize:"12px",fontFamily:"Helvetica, Arial, sans-serif",labels:{colors:"#FFFFFF"}},responsive:[{breakpoint:480,options:{chart:{width:150},legend:{position:"bottom"}}}]},this.isViewInitialized&&setTimeout(()=>{this.studentChart()?this.studentChart()?.updateOptions(this.studentChartOptions,!0):console.warn("Student chart component not initialized")},100)}prepareTeacherChartData(){this.teacherChartOptions={chart:{type:"pie",height:220,toolbar:{show:!1}},labels:["Present","Absent","On Leave"],series:this.teacherDashboardData?[this.teacherPresent,this.teacherAbsent,this.teacherOnLeave]:[0,0,0],colors:["#36A2EB","#FF6384","#FFCE56"],legend:{position:"bottom",fontSize:"12px",fontFamily:"Helvetica, Arial, sans-serif",labels:{colors:"#FFFFFF"}},responsive:[{breakpoint:480,options:{chart:{width:150},legend:{position:"bottom"}}}]},this.isViewInitialized&&setTimeout(()=>{this.teacherChart()?this.teacherChart()?.updateOptions(this.teacherChartOptions,!0):console.warn("Teacher chart component not initialized")},100)}updateCharts(){this.studentChart()&&this.studentChartOptions.series?this.studentChart()?.updateOptions(this.studentChartOptions,!0):console.warn("Student chart not updated: component or options missing"),this.teacherChart()&&this.teacherChartOptions.series?this.teacherChart()?.updateOptions(this.teacherChartOptions,!0):console.warn("Teacher chart not updated: component or options missing"),this.paymentMethodChart()&&this.paymentMethodChartOptions.series?this.paymentMethodChart()?.updateOptions(this.paymentMethodChartOptions,!0):console.warn("Payment method chart not updated: component or options missing"),this.monthlyTrendChart()&&this.monthlyTrendChartOptions.series?this.monthlyTrendChart()?.updateOptions(this.monthlyTrendChartOptions,!0):console.warn("Monthly trend chart not updated: component or options missing")}onClassChange(n){this.selectedClassId=n.target.value,this.fetchStudentAttendance(this.selectedClassId),this.fetchFeeDashboard()}onFilterChange(){this.fetchFeeDashboard()}generateReceipts(){if(0===this.totalDefaultersCount)return void this.toastr.warning("No defaulters found!");const n={schoolId:this.authService.getUserSchoolId(),className:this.selectedClassId?this.classes.find(e=>e._id===this.selectedClassId)?.name:null,month:this.selectedMonth,academicYearId:this.selectedAcademicYearId};this.dashboardService.generateClassReceipts(n).subscribe({next:e=>{const a=window.URL.createObjectURL(e),i=document.createElement("a");i.href=a,i.download=`Defaulter_Receipts_${(new Date).toISOString().slice(0,10)}.zip`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(a),this.toastr.success("Defaulter receipts downloaded successfully!")},error:e=>{console.error("Receipt generation failed:",e),this.toastr.error("Failed to generate receipts. Please try again.")}})}sendSMSReminders(){this.toastr.info("SMS Reminder feature is coming soon!","Feature Update",{timeOut:5e3,positionClass:"toast-top-right"})}exportDefaultersExcel(){if(0===this.topDefaulters.length)return void this.toastr.warning("No defaulters to export!");const n=this.topDefaulters.map((u,C)=>({"S.No":C+1,"Student Name":u.studentName||"-","Admission No":u.admissionNo||"-",Class:u.className||"-","Parent Phone":u.parentPhone||"Not Available","Total Due (\u20b9)":u.remainingDue||0,"Due Since":this.formatDueMonths(u.dueMonths)})),e=x.Wp.json_to_sheet(n),a=n.reduce((u,C)=>(Object.keys(C).forEach((k,F)=>{const tt=String(C[k]).length;u[F]=Math.max(u[F]||12,tt+4)}),u),[]);e["!cols"]=a.map(u=>({width:u}));const i=x.Wp.book_new();x.Wp.book_append_sheet(i,e,"Defaulters");const c=x.M9(i,{bookType:"xlsx",type:"array"}),l=new Blob([c],{type:"application/octet-stream"}),p=`Defaulters_Report_${(new Date).toISOString().slice(0,10)}.xlsx`;(0,S.saveAs)(l,p),this.toastr.success(`${this.topDefaulters.length} defaulters exported to Excel!`,"Success")}formatDueMonths(n){return n&&0!==n.length?n.join(", "):"This Month"}createAcademicYear(){console.log("Navigate to create academic year page or trigger API call")}getMonthsForYear(){const n=[{value:"-01",label:"January"},{value:"-02",label:"February"},{value:"-03",label:"March"},{value:"-04",label:"April"},{value:"-05",label:"May"},{value:"-06",label:"June"},{value:"-07",label:"July"},{value:"-08",label:"August"},{value:"-09",label:"September"},{value:"-10",label:"October"},{value:"-11",label:"November"},{value:"-12",label:"December"}],e=this.academicYears.find(l=>l._id===this.selectedAcademicYearId);if(!e)return n.map(l=>({value:`2025${l.value}`,label:l.label}));const a=new Date(e.startDate),i=new Date(e.endDate),c=a.getFullYear();return n.filter(l=>{const p=new Date(`${c}${l.value}-01`);return p>=a&&p<=i}).map(l=>({value:`${c}${l.value}`,label:l.label}))}static{this.\u0275fac=function(e){return new(e||o)(t.rXU(I.tw))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-default"]],viewQuery:function(e,a){1&e&&(t.wEZ(a.managementChart,E,5),t.wEZ(a.studentChart,R,5),t.wEZ(a.teacherChart,$,5),t.wEZ(a.paymentMethodChart,A,5),t.wEZ(a.monthlyTrendChart,B,5)),2&e&&t.NyB(5)},decls:1,vars:1,consts:[["managementChart",""],["noBreakdownData",""],["paymentMethodChart",""],["monthlyTrendChart",""],[4,"ngIf"],[1,"container-fluid"],[1,"row"],[1,"col-12","col-md-3","col-lg-3"],[1,"custom-card"],[1,"card-content"],[1,"text-group"],[2,"color","#007BFF"],[1,"icon"],["src","https://img.icons8.com/ios-filled/50/007BFF/graduation-cap.png","alt","Students Icon","width","40"],["src","https://img.icons8.com/ios-filled/50/007BFF/conference-call.png","alt","Teachers Icon","width","40"],[2,"color","#dc3545"],["src","https://img.icons8.com/?size=100&id=39952&format=png&color=007BFF","alt","Private Teachers Icon","width","40"],[2,"color","#198754"],[1,"col-md-7","col-sm-12"],[1,"chart-card"],[1,"manage-value"],[1,"chart-title"],[1,"chart-filters"],[1,"btn-fill","blue",3,"click"],[1,"btn-fill","orange",3,"click"],[1,"btn-fill","purple",3,"click"],[3,"series","chart","stroke","dataLabels","markers","xaxis","yaxis","grid","fill","theme","legend","tooltip"],["class","text-center","style","position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #666;",4,"ngIf"],[1,"col-md-5","col-lg-5","col-sm-12"],[1,"chart-card","col-md-8","col-sm-12",2,"width","100%"],[1,"chart-title",2,"text-align","center"],[1,"col-md-12","mb-3"],[1,"col-12"],[1,"form-group","mb-3"],["id","monthSelect",1,"form-select","form-select-sm","custom-dropdown",3,"ngModelChange","change","ngModel"],["value",""],[4,"ngFor","ngForOf"],[1,"form-select","form-select-sm","custom-dropdown",3,"ngModelChange","change","ngModel"],[1,"col-md-12"],[1,"btn","btn-success","shadow-lg",2,"border-radius","5px",3,"click"],[1,"student"],[2,"font-family","'Poppins',sans-serif","font-size","14px","color","gray","font-weight","400"],[1,"teacher"],[1,"row",2,"margin-top","10px","margin-bottom","10px"],[1,"col-md-7","col-sm-12","col-lg-7"],[1,"card","custom-table-card","shadow-sm"],[1,"card-header","bg-gradient","text-white","p-3","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"table-responsive"],[1,"table","table-hover","custom-table","align-middle","table-bordered"],[1,"table-light"],[3,"click"],[4,"ngIf","ngIfElse"],[1,"mb-3"],[1,"col-md-6","col-md-12"],[3,"series","chart","labels","colors","legend","responsive","fill","dataLabels","plotOptions"],[3,"series","chart","xaxis","colors","legend","responsive","stroke","fill","markers"],["class","text-center",4,"ngIf"],[1,"col-md-5","col-sm-12"],[1,"text-light"],[1,"btn","btn-sm","btn-light",3,"click"],[1,"table-responsive",2,"max-height","400px","overflow-y","auto"],[1,"table","table-hover","mb-0"],[1,"table-light","sticky-top"],[1,"p-3","border-top","bg-light","d-flex","flex-wrap","gap-2","justify-content-center"],[1,"btn","btn-sm","btn-warning","px-4",3,"click","disabled"],[1,"fas","fa-sms","me-1"],["class","badge bg-danger ms-1",4,"ngIf"],[1,"btn","btn-sm","btn-success","px-4",3,"click","disabled"],[1,"fas","fa-file-pdf","me-1"],[1,"btn","btn-sm","btn-info","text-white","px-4",3,"click","disabled"],[1,"fas","fa-file-excel","me-1"],[1,"text-center",2,"position","absolute","top","50%","left","50%","transform","translate(-50%, -50%)","color","#666"],[3,"value"],[1,"text-success","fw-semibold"],[3,"ngClass"],[1,"progress",2,"height","18px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success","fw-semibold"],["colspan","7",1,"text-center","text-muted","py-4"],[1,"text-center"],[1,"text-danger","fw-bold"],["colspan","4",1,"text-center","py-4","text-muted"],[1,"badge","bg-danger","ms-1"]],template:function(e,a){1&e&&t.DNE(0,K,213,66,"div",4),2&e&&t.Y8G("ngIf",a.isAdmin)},dependencies:[m.MD,m.YU,m.Sq,m.bT,m.QX,_.J,_.Q,f.YN,f.xH,f.y7,f.wz,f.BC,f.vS,j],styles:["body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background:#f8f9fd;min-height:100vh}.custom-dropdown[_ngcontent-%COMP%]{border-radius:10px;border:1px solid #e0e0e0;padding:8px 12px;font-size:14px;background-color:#fff;box-shadow:0 2px 6px #0000000d;transition:all .2s ease-in-out}.custom-dropdown[_ngcontent-%COMP%]:focus{border-color:#2575fc;box-shadow:0 0 5px #2575fc80}.row[_ngcontent-%COMP%]{justify-content:center}.custom-card[_ngcontent-%COMP%]{border-radius:15px;width:100%;height:120px;color:#000;border:none;display:flex;align-items:center;padding:15px;box-shadow:0 8px 10px #00000026,0 4px 10px #0000001a,inset 0 1px #ffffff4d;transition:transform .2s,box-shadow .2s}.custom-card[_ngcontent-%COMP%]:hover{box-shadow:0 12px 30px #0003,0 6px 15px #00000026,inset 0 1px #ffffff4d;transform:translateY(-5px)}.custom-card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.custom-card[_ngcontent-%COMP%]   .text-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.manage-value[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:auto}.custom-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:700;line-height:1.1}.custom-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.custom-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.orange[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ff7043,#ff8f00);box-shadow:0 8px 20px #ff70434d,0 4px 10px #ff8f0033,inset 0 1px #ffffff4d}.purple[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ab47bc,#7e57c2);box-shadow:0 8px 20px #ab47bc4d,0 4px 10px #7e57c233,inset 0 1px #ffffff4d}.action-buttons[_ngcontent-%COMP%]{padding:1rem;display:flex;gap:1rem;flex-wrap:wrap;justify-content:center}.custom-button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .3s ease;white-space:nowrap}.primary[_ngcontent-%COMP%]{background:linear-gradient(45deg,#4a90e2,#63b3ed);color:#fff}.warning[_ngcontent-%COMP%]{background:linear-gradient(45deg,#ff9800,#ffb74d);color:#fff}.info[_ngcontent-%COMP%]{background:linear-gradient(45deg,#00bcd4,#4dd0e1);color:#fff}.custom-button[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-2px);box-shadow:0 4px 12px #0003}.custom-button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 6px #0003}@media (max-width: 768px){.action-buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.manage-value[_ngcontent-%COMP%]{display:block;justify-content:space-between;margin:auto}.custom-button[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem}.custom-button[_ngcontent-%COMP%]:last-child{margin-bottom:0}}.blue[_ngcontent-%COMP%]{background:linear-gradient(90deg,#42a5f5,#2196f3);box-shadow:0 8px 20px #42a5f54d,0 4px 10px #2196f333,inset 0 1px #ffffff4d}.teal[_ngcontent-%COMP%]{background:linear-gradient(90deg,#26a69a,#00897b);box-shadow:0 8px 20px #26a69a4d,0 4px 10px #00897b33,inset 0 1px #ffffff4d}.cyan[_ngcontent-%COMP%]{background:linear-gradient(90deg,#26c6da,#00acc1);box-shadow:0 8px 20px #26c6da4d,0 4px 10px #00acc133,inset 0 1px #ffffff4d}@media (max-width: 767.98px){.custom-card[_ngcontent-%COMP%]{height:100px}.custom-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}.custom-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}.custom-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px}}.chart-card[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:20px;margin-top:20px;margin-bottom:20px;box-shadow:0 8px 20px #00000026,0 4px 10px #0000001a,inset 0 1px #ffffff4d}.chart-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin-bottom:10px}.chart-filters[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:10px}.chart-filters[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{padding:5px 12px;border-radius:20px;border:1px solid #ccc;background:transparent;font-size:13px;font-weight:500;cursor:pointer}.chart-filters[_ngcontent-%COMP%]   .btn-fill[_ngcontent-%COMP%]{padding:5px 12px;border-radius:20px;font-size:13px;font-weight:500;color:#fff;border:none;cursor:pointer}.chart-filters[_ngcontent-%COMP%]   .purple[_ngcontent-%COMP%]{border-color:#7e57c2;color:#fff}.chart-filters[_ngcontent-%COMP%]   .blue[_ngcontent-%COMP%]{border-color:#42a5f5;color:#fff}.chart-filters[_ngcontent-%COMP%]   .orange[_ngcontent-%COMP%]{background:#ff7043}.custom-table-card[_ngcontent-%COMP%]{margin-top:20px;border-radius:15px;overflow:hidden;box-shadow:0 8px #00000026,0 4px 10px #0000001a;transition:transform .2s,box-shadow .2s}.custom-table-card[_ngcontent-%COMP%]:hover{box-shadow:0 12px 30px #0003,0 6px 15px #00000026;transform:translateY(-5px)}.bg-gradient[_ngcontent-%COMP%]{background:linear-gradient(to right,#007bff,#a0afe8)}.custom-table[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden;box-shadow:0 12px 30px #0003,0 6px 15px #00000026}.custom-table[_ngcontent-%COMP%]   .bg-gradient[_ngcontent-%COMP%]{background:linear-gradient(90deg,#007bff,#00c6ff)}.custom-table[_ngcontent-%COMP%]   .custom-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;cursor:pointer;white-space:nowrap}.custom-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle;transition:background-color .2s}.custom-table[_ngcontent-%COMP%]   .table-row-hover[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.custom-table[_ngcontent-%COMP%]   .table-striped[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#ffffff08}.text-muted[_ngcontent-%COMP%]{color:#ccc!important}.dashboard-card[_ngcontent-%COMP%]{border-radius:15px;overflow:hidden}apx-chart[_ngcontent-%COMP%]{width:100%!important;height:100%!important}"]})}}return o})()}}]);