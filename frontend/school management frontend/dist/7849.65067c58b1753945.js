"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[7849],{965:(O,m,r)=>{r.d(m,{y:()=>_});var g=r(2525),p=r(4438),t=r(1626);let _=(()=>{class i{constructor(c){this.http=c,this.baseUrl=`${g.c.apiUrl}/api/academicyear`}createAcademicYear(c){return this.http.post(`${this.baseUrl}/create`,c)}editAcademicYear(c){return this.http.put(`${this.baseUrl}/edit`,c)}getActiveAcademicYear(c){return this.http.get(`${this.baseUrl}/active/${c}`)}getAllAcademicYears(c){return this.http.get(`${this.baseUrl}/${c}`)}activateAcademicYear(c,d){return this.http.post(`${this.baseUrl}/activate/${d}`,{academicYearId:c})}setActiveAcademicYear(c,d){return this.http.post(`${this.baseUrl}/set`,{schoolId:c,academicYearId:d})}getNextAcademicYear(c,d){return this.http.get(`${this.baseUrl}/next/${c}?schoolId=${d}`)}static{this.\u0275fac=function(d){return new(d||i)(p.KVO(t.Qq))}}static{this.\u0275prov=p.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()},7849:(O,m,r)=>{r.r(m),r.d(m,{ParticularStudentAttendaceComponent:()=>F});var g=r(177),p=r(9417),t=r(4438),_=r(2525),i=r(1626);let h=(()=>{class n{constructor(e){this.http=e,this.apiUrl=`${_.c.apiUrl}`}getStudentReport(e,a="weekly"){return this.http.get(`${this.apiUrl}/api/attendance/student-report`,{params:{academicYearId:e,view:a}})}static{this.\u0275fac=function(a){return new(a||n)(t.KVO(i.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var c=r(965);const d=()=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function u(n,s){1&n&&(t.j41(0,"div",30),t.EFF(1,"Excellent!"),t.k0s())}function f(n,s){1&n&&(t.j41(0,"div",31),t.EFF(1,"Needs Improvement"),t.k0s())}function b(n,s){if(1&n&&(t.j41(0,"div"),t.EFF(1),t.k0s()),2&n){const e=s.$implicit;t.R7$(),t.JRh(e)}}function y(n,s){if(1&n&&(t.j41(0,"div",35),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.JRh(t.i5U(2,1,e.date,"d"))}}function v(n,s){if(1&n&&(t.j41(0,"div",36),t.EFF(1),t.k0s()),2&n){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.status.charAt(0)," ")}}function x(n,s){if(1&n&&(t.j41(0,"div",32),t.DNE(1,y,3,4,"div",33)(2,v,2,1,"div",34),t.k0s()),2&n){const e=s.$implicit;t.AVh("present","Present"===e.status)("absent","Absent"===e.status)("late","Late"===e.status)("today",e.isToday)("empty",!e.date),t.R7$(),t.Y8G("ngIf",e.date),t.R7$(),t.Y8G("ngIf",e.status)}}function k(n,s){if(1&n){const e=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h1"),t.EFF(5),t.k0s(),t.j41(6,"p"),t.EFF(7),t.k0s(),t.j41(8,"div",5),t.EFF(9),t.k0s()()(),t.j41(10,"div",6)(11,"div",7)(12,"div",8),t.EFF(13),t.k0s(),t.j41(14,"div",9),t.EFF(15,"Present"),t.k0s()(),t.j41(16,"div",10)(17,"div",8),t.EFF(18),t.k0s(),t.j41(19,"div",9),t.EFF(20,"Absent"),t.k0s()(),t.j41(21,"div",11)(22,"div",8),t.EFF(23),t.k0s(),t.j41(24,"div",9),t.EFF(25,"Late"),t.k0s()(),t.j41(26,"div",12)(27,"div",13),t.EFF(28),t.k0s(),t.j41(29,"div",9),t.EFF(30,"Attendance"),t.k0s(),t.DNE(31,u,2,0,"div",14)(32,f,2,0,"div",15),t.k0s()()(),t.j41(33,"div",16)(34,"div",17)(35,"h2"),t.EFF(36),t.nI1(37,"date"),t.k0s(),t.j41(38,"div",18)(39,"span"),t.nrm(40,"div",19),t.EFF(41," Present"),t.k0s(),t.j41(42,"span"),t.nrm(43,"div",20),t.EFF(44," Absent"),t.k0s(),t.j41(45,"span"),t.nrm(46,"div",21),t.EFF(47," Late"),t.k0s(),t.j41(48,"span"),t.nrm(49,"div",22),t.EFF(50," Today"),t.k0s()()(),t.j41(51,"div",23)(52,"div",24),t.DNE(53,b,2,1,"div",25),t.k0s(),t.j41(54,"div",26),t.DNE(55,x,3,12,"div",27),t.k0s()()(),t.j41(56,"div",28)(57,"p"),t.EFF(58,"Your attendance is recorded daily by your teachers."),t.k0s(),t.j41(59,"button",29),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.print())}),t.EFF(60,"Print Report"),t.k0s()()()}if(2&n){const e=t.XpG();t.R7$(5),t.JRh(e.studentName),t.R7$(2),t.Lme("Class ",e.className," \u2022 ",e.admissionNo,""),t.R7$(2),t.JRh(e.academicYearName),t.R7$(4),t.JRh(e.summary.present),t.R7$(5),t.JRh(e.summary.absent),t.R7$(5),t.JRh(e.summary.late),t.R7$(3),t.AVh("excellent",e.summary.percentage>=95),t.R7$(2),t.SpI("",e.summary.percentage,"%"),t.R7$(3),t.Y8G("ngIf",e.summary.percentage>=95),t.R7$(),t.Y8G("ngIf",e.summary.percentage<75),t.R7$(4),t.JRh(t.i5U(37,15,e.currentMonth,"MMMM yyyy")),t.R7$(17),t.Y8G("ngForOf",t.lJ4(18,d)),t.R7$(2),t.Y8G("ngForOf",e.calendarCells)}}let F=(()=>{class n{constructor(e,a){this.attendanceService=e,this.academicYearService=a,this.studentName="",this.className="",this.admissionNo="",this.schoolName="",this.academicYearName="",this.summary={present:0,absent:0,late:0,totalDays:0,percentage:0},this.dailyData={},this.viewMode="monthly",this.loading=!0,this.calendarCells=[],this.currentMonth=new Date}ngOnInit(){this.loadStudentInfoAndAttendance()}loadStudentInfoAndAttendance(){const e=localStorage.getItem("schoolId");e&&this.academicYearService.getActiveAcademicYear(e).subscribe({next:a=>{a&&(this.academicYearName=a.name||"Current Year",this.schoolName=a.schoolName||"Your School",this.loadAttendance(a._id))}})}loadAttendance(e){this.loading=!0,this.attendanceService.getStudentReport(e,"monthly").subscribe({next:a=>{if(a.success){this.summary={present:a.data.summary.present||0,absent:a.data.summary.absent||0,late:a.data.summary.late||0,totalDays:a.data.summary.totalDays||0,percentage:a.data.summary.percentage||0},this.dailyData=a.data.dailyData||{};const o=JSON.parse(localStorage.getItem("user")||"{}");this.studentName=o.name||"Student",this.className=o.className||"Class",this.admissionNo=o.admissionNo||"N/A",this.generateCalendar()}this.loading=!1},error:()=>this.loading=!1})}generateCalendar(){const e=this.currentMonth.getFullYear(),a=this.currentMonth.getMonth(),o=new Date(e,a,1),C=(new Date(e,a+1,0),new Date(o));C.setDate(o.getDate()-o.getDay()),this.calendarCells=[];const M=new Date;M.setHours(0,0,0,0);for(let P=0;P<42;P++){const l=new Date(C);l.setDate(C.getDate()+P);const A=l.toISOString().split("T")[0],E=this.dailyData[A]||null;this.calendarCells.push({date:l.getMonth()===a?l:null,status:E,isHoliday:!1,isToday:l.toISOString().split("T")[0]===M.toISOString().split("T")[0]})}}print(){window.print()}static{this.\u0275fac=function(a){return new(a||n)(t.rXU(h),t.rXU(c.y))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-particular-student-attendace"]],decls:1,vars:1,consts:[["class","attendance-masterpiece",4,"ngIf"],[1,"attendance-masterpiece"],[1,"hero-header"],[1,"student-card"],[1,"info"],[1,"year-badge"],[1,"summary-grid"],[1,"stat-card","present"],[1,"number"],[1,"label"],[1,"stat-card","absent"],[1,"stat-card","late"],[1,"stat-card","percentage"],[1,"big-number"],["class","remark",4,"ngIf"],["class","remark warning",4,"ngIf"],[1,"calendar-section"],[1,"calendar-header"],[1,"legend"],[1,"dot","present"],[1,"dot","absent"],[1,"dot","late"],[1,"dot","today"],[1,"calendar"],[1,"day-names"],[4,"ngFor","ngForOf"],[1,"days"],["class","day",3,"present","absent","late","today","empty",4,"ngFor","ngForOf"],[1,"footer"],[1,"print-btn",3,"click"],[1,"remark"],[1,"remark","warning"],[1,"day"],["class","date",4,"ngIf"],["class","status",4,"ngIf"],[1,"date"],[1,"status"]],template:function(a,o){1&a&&t.DNE(0,k,61,19,"div",0),2&a&&t.Y8G("ngIf",!o.loading)},dependencies:[g.MD,g.Sq,g.bT,g.vh,p.YN],styles:[".attendance-masterpiece[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh;color:#fff;padding:2rem}.attendance-masterpiece[_ngcontent-%COMP%]   .hero-header[_ngcontent-%COMP%]{background:#ffffff26;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:30px;padding:3rem;margin-bottom:3rem;box-shadow:0 20px 50px #0000004d}.attendance-masterpiece[_ngcontent-%COMP%]   .hero-header[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2rem;margin-bottom:3rem}.attendance-masterpiece[_ngcontent-%COMP%]   .hero-header[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;object-fit:cover;border:6px solid white;box-shadow:0 15px 35px #0006}.attendance-masterpiece[_ngcontent-%COMP%]   .hero-header[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;margin:0;font-weight:700}.attendance-masterpiece[_ngcontent-%COMP%]   .hero-header[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.3rem;opacity:.9;margin:.5rem 0}.attendance-masterpiece[_ngcontent-%COMP%]   .hero-header[_ngcontent-%COMP%]   .student-card[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .year-badge[_ngcontent-%COMP%]{background:#ffffff4d;padding:.5rem 1.5rem;border-radius:50px;display:inline-block;font-size:1rem;margin-top:1rem}.attendance-masterpiece[_ngcontent-%COMP%]   .hero-header[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:2rem}.attendance-masterpiece[_ngcontent-%COMP%]   .hero-header[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background:#fff3;padding:2rem;border-radius:24px;text-align:center;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:2px solid transparent;transition:all .4s ease}.attendance-masterpiece[_ngcontent-%COMP%]   .hero-header[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px)}.attendance-masterpiece[_ngcontent-%COMP%]   .hero-header[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem}.attendance-masterpiece[_ngcontent-%COMP%]   .hero-header[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{font-size:4rem;font-weight:800;margin:.5rem 0}.attendance-masterpiece[_ngcontent-%COMP%]   .hero-header[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .big-number[_ngcontent-%COMP%]{font-size:5rem;font-weight:900}.attendance-masterpiece[_ngcontent-%COMP%]   .hero-header[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:1.2rem;opacity:.9}.attendance-masterpiece[_ngcontent-%COMP%]   .hero-header[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .stat-card.present[_ngcontent-%COMP%]{border-color:#10b981}.attendance-masterpiece[_ngcontent-%COMP%]   .hero-header[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .stat-card.absent[_ngcontent-%COMP%]{border-color:#ef4444}.attendance-masterpiece[_ngcontent-%COMP%]   .hero-header[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .stat-card.late[_ngcontent-%COMP%]{border-color:#f59e0b}.attendance-masterpiece[_ngcontent-%COMP%]   .hero-header[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .stat-card.percentage.excellent[_ngcontent-%COMP%]{border-color:#8b5cf6;background:#8b5cf64d}.attendance-masterpiece[_ngcontent-%COMP%]   .hero-header[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .remark[_ngcontent-%COMP%]{font-size:1.5rem;margin-top:1rem;font-weight:700}.attendance-masterpiece[_ngcontent-%COMP%]   .hero-header[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{color:#fbbf24}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]{background:#fff;color:#333;border-radius:30px;overflow:hidden;box-shadow:0 25px 60px #0000004d}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e293b,#334155);color:#fff;padding:2rem;display:flex;justify-content:space-between;align-items:center}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.2rem;margin:0;font-weight:700}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]{display:flex;gap:2rem;font-size:1rem}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .present[_ngcontent-%COMP%]{background:#10b981}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .absent[_ngcontent-%COMP%]{background:#ef4444}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .late[_ngcontent-%COMP%]{background:#f59e0b}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .holiday[_ngcontent-%COMP%]{background:#94a3b8}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar-header[_ngcontent-%COMP%]   .legend[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .today[_ngcontent-%COMP%]{background:#667eea;animation:_ngcontent-%COMP%_pulse 2s infinite}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar[_ngcontent-%COMP%]{padding:2rem}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar[_ngcontent-%COMP%]   .day-names[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);font-weight:700;margin-bottom:1rem;font-size:1.1rem;color:#475569}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:1px;background:#e2e8f0;border-radius:20px;overflow:hidden}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{background:#fff;aspect-ratio:1;display:flex;flex-direction:column;align-items:center;justify-content:center;font-weight:600;position:relative;transition:all .3s ease}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   .day.present[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   .day.absent[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   .day.late[_ngcontent-%COMP%]{background:#fef9c3;color:#92400e}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   .day.holiday[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   .day.today[_ngcontent-%COMP%]{border:4px solid #667eea;font-size:1.4rem}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:1.5rem}.attendance-masterpiece[_ngcontent-%COMP%]   .calendar-section[_ngcontent-%COMP%]   .calendar[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:900;margin-top:.5rem}.attendance-masterpiece[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{text-align:center;margin-top:3rem;padding:2rem;background:#ffffff1a;border-radius:24px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.attendance-masterpiece[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:1rem 0;font-size:1.1rem;opacity:.9}.attendance-masterpiece[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .print-btn[_ngcontent-%COMP%]{margin-top:2rem;padding:1.2rem 3rem;background:#fff;color:#667eea;border:none;border-radius:50px;font-size:1.2rem;font-weight:700;box-shadow:0 15px 35px #0000004d;cursor:pointer;transition:all .3s ease}.attendance-masterpiece[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .print-btn[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 25px 50px #0006}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #667eeab3}70%{box-shadow:0 0 0 15px #667eea00}to{box-shadow:0 0 #667eea00}}"]})}}return n})()}}]);